<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Arkady Klimov (arklimov@keldysh.ru)">
<META NAME="Subject" CONTENT="Re: Conditions in Refal-5.">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Conditions in Refal-5.</H1>
<HR>
<P>
<!-- received="Mon Feb 09 02:11:55 2004" -->
<!-- isoreceived="20040208231155" -->
<!-- sent="Sat, 7 Feb 2004 23:28:17 +0300" -->
<!-- isosent="20040207202817" -->
<!-- name="Arkady Klimov" -->
<!-- email="arklimov@keldysh.ru" -->
<!-- subject="Re: Conditions in Refal-5." -->
<!-- id="000f01c3edb8$ebc334b0$8704000a@Swan" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="20040206225049.GA497@mccme.ru" -->
<STRONG>Subject: </STRONG>Re: Conditions in Refal-5.<BR>
<STRONG>From: </STRONG>Arkady Klimov (<EM>arklimov@keldysh.ru</EM>)<BR>
<STRONG>Date: </STRONG>Sat Feb 07 2004 - 23:28:17 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#428">[ date ]</A>
<A HREF="index.html#428">[ thread ]</A>
<A HREF="subject.html#428">[ subject ]</A>
<A HREF="author.html#428">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0429.html">Savtchenko Maxim: "Re: Conditions in Refal-5."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0427.html">Sergei Romanenko: "Re: рефал или Рефал"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0425.html">Anton Orlov: "Re: Conditions in Refal-5."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0429.html">Savtchenko Maxim: "Re: Conditions in Refal-5."</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0425.html">Arkady Klimov: "Re: Conditions in Refal-5."</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Максим, добрый день,
<BR>
<P>Антон уже ответил достаточно полно, я хочу от себя немного добавить.
<BR>
Для рефала-6 когда-то (более 10 лет назад) мной было составлено краткое
<BR>
формальное описание синтаксиса и семантики(!), в котором проводилась
<BR>
идея, что вообще не нужно связывать &quot;образец&quot; и &quot;результат&quot; ни в форме
<BR>
[result:pattern], ни в форме [pattern,result], а считать и то и другое частными
<BR>
случаями понятия &quot;действие&quot;, &quot;action&quot;, последовательность которых и
<BR>
образует &quot;предложение&quot;. (В АС, судя по письму Антона, аналогично).
<BR>
При этом за образцом может опять следовать новый образец, так же как за
<BR>
результатом - новый результат, например
<BR>
<P>F { s1 e2 : e3 s4 = &lt;Print e2&gt; = &lt;Print e3&gt; };
<BR>
<P>F получает строку и печатает ее без первого, а потом без последнего символа
<BR>
Кстати, этот пример использует, что образец как бы &quot;сохраняет аргумент&quot;.
<BR>
<P>В аттаче - файл с текстом этого описания, который входит в состав поставки
<BR>
рефала-6. К сожалению, он лежит там в глубоком месте и наверно, редко кто
<BR>
на него натыкается.
<BR>
<P>Семантика там очень формально излагается (да еще на Бог весть каком
<BR>
английском) и понять ее наверно может только тот, кто содержательно
<BR>
ее уже хорошо знает. Метод описания практически тот же, что использовал
<BR>
Романенко в известной книге по Рефалу Плюс, но содержательно семантика
<BR>
отличается тем, что у Романенко она давалась для составной конструкции
<BR>
вида result:pattern, а у меня этого объединения нет.
<BR>
<P>Кроме того, обратите внимание что и у Романенко и у меня семантика
<BR>
разбивается на систему взаимосвязанных семантик, например, есть семантика
<BR>
образца (как операция отождествления с объектным выражением), есть
<BR>
семантика блока, есть семантика хвоста или пути.
<BR>
У действия есть как бы две семантики: одна определяет результатное выражение,
<BR>
передаваемое хвосту, другая - набор присваиваний переменным, точнее,
<BR>
расширение исходного набора, тоже передаваемое дальше хвосту.
<BR>
Поскольку в рефале нет действий, которые и результат выдают новый и среду
<BR>
меняют, то в формализме нет нужды вводить объединенную семантику
<BR>
чего-то вроде Вашего БП.
<BR>
Кроме того, семантика отдельного действия, а у Романенко - &quot;перестройки&quot;,
<BR>
дается лишь контексте хвоста (пути). Только для него можно
<BR>
сказать, чтО есть его результат.
<BR>
Сказать отдельно, чтО есть совокупный результат действия
<BR>
образца или перестройки довольно сложно и громоздко: в этот результат,
<BR>
помимо значения (объектного выражения), надо еще включать и набор
<BR>
связываний для уже определенных переменных, чтобы их использовать
<BR>
в дальнейшем вычислении (которых, как и Вас должно быть множество).
<BR>
А Вы в своем определении это упустили:
<BR>
<P><EM>&gt;    На выходе 0 - результат подстановки в A переменных связанных во входном поле
</EM><BR>
<EM>&gt;   зрения, а так же связанных в результате сопоставления P с входным полем
</EM><BR>
<EM>&gt;    зрения.
</EM><BR>
<P>Хотя, у Вас используется понятие &quot;переменных связанных во входном
<BR>
поле зрения&quot;, но само оно остается неопределенным.
<BR>
<P>Короче, сухой остаток в том, что лучше вообще ни в каком порядке
<BR>
образец с аргументом не склеивать, а определять каждый отдельно и
<BR>
независимо. При этом использовать ли формальный стиль как у нас с
<BR>
Романенко, или псевдокод, как у Вас - уже дело вкуса.
<BR>
Аркадий.
<BR>
<P><P><P><P><P><P><P><P><P><P><P><P><P><P>----- Original Message ----- 
<BR>
From: &quot;Anton Orlov&quot; &lt;orlov@mccme.ru&gt;
<BR>
To: &lt;refal@botik.ru&gt;
<BR>
Sent: Saturday, February 07, 2004 1:50 AM
<BR>
Subject: Re: Conditions in Refal-5.
<BR>
<P><P>|         Добрый вечер!
<BR>
|
<BR>
| On Fri, Feb 06, 2004 at 12:56:59 +0300, Savtchenko Maxim wrote:
<BR>
| &gt; Andrei Klimov &lt;klimov@keldysh.ru&gt; wrote:
<BR>
| &gt;
<BR>
| &gt; &gt; А по существу (если я правильно понял, что Вы имеете в виду),
<BR>
| &gt; &gt; я могу только заметить, что подобная работа по &quot;регуляризации&quot;
<BR>
| &gt; &gt; синтаксиса Рефала была проделана на рубеже 80-х и 90-х
<BR>
| &gt; &gt; при разработке Рефала Плюс, а затем шлифовалась дальше
<BR>
| &gt; &gt; в Рефале-6 (теперь это Refal-J -- Рефал над Явой).
<BR>
| &gt;
<BR>
| &gt; Андрей, вы наверное обратили основное внимание на фразу:
<BR>
| &gt;
<BR>
| &gt; &quot;... в нашем случае последнее БП функционально ничем не отличается от
<BR>
| &gt; остальных, и поэтому его не стоит выделять синтаксически.&quot;
<BR>
| &gt;
<BR>
| &gt; Вопрос синтаксиса в моей идее наименее существенен, замеченное вами имело
<BR>
| &gt; целью просто чуть-чуть упростить БНФ и никакой смысловой нагрузки не несло.
<BR>
| &gt; Мне интересно иное - пробовал ли кто-нибудь взглянуть на СЕМАНТИКУ
<BR>
| &gt; предложений немного с другой стороны. Рассмотреть работу предложения не как
<BR>
| &gt; &quot;сопоставляем вход с левой частью и заменяем на правую, если выполняются все
<BR>
| &gt; условия&quot;, а как на работу соединённых в последовательную цепочку &quot;базовых
<BR>
| &gt; предложений&quot;.
<BR>
|
<BR>
| Мне кажется, что семантикой рефал-предложения разумно называть
<BR>
| функцию из множества рефал-выражений + таблиц означенных
<BR>
| переменных в множество рефал-выражений.
<BR>
|
<BR>
| Если я правильно понимаю, семантика каждого Вами описанного
<BR>
| предложения определяется как семантика рефал5-предложения,
<BR>
| которое получается из Вашего заменой каждого базового предложения
<BR>
| на [pattern, arg] и формированием последовательности
<BR>
| соответствующих условий (перестроек) [arg : pattern].  Это так?
<BR>
|
<BR>
| То есть Вы, по сути, предлагаете другой вариант не семантики, а
<BR>
| синтаксиса предложения, чему и соответствует другая запись в виде
<BR>
| БНФ.
<BR>
|
<BR>
| Работа по упрощению (регуляризации) синтаксиса Рефала идёт уже
<BR>
| давно, про что и написал Андрей Валентинович.  Как результат (или
<BR>
| часть) этой работы был создан так называемый Абстрактный
<BR>
| Синтаксис (АС), включающий элементы для адекватного отображения
<BR>
| программ на всех современных диалектах Рефала.
<BR>
|
<BR>
| Некоторую версию АС можно посмотреть по адресу:
<BR>
| <A HREF="http://skif.pereslavl.ru/skif/index.cgi?module=chap&action=getpage&data=refal">http://skif.pereslavl.ru/skif/index.cgi?module=chap&action=getpage&data=refal</A>\as-syntax.html
<BR>
|
<BR>
| Часть АС, соответствующая рефал5-предложению, выглядит
<BR>
| так:
<BR>
|
<BR>
| e.Sentence ::= /*Empty*/ | t.Action e.Sentence
<BR>
| t.Action   ::= t.Pattern | t.Result | t.Block
<BR>
| t.Block    ::= (BLOCK e.Branches)
<BR>
| e.Branches ::= /*Empty*/ | t.Branch e.Branches
<BR>
| t.Branch   ::= (BRANCH e.Sentence)
<BR>
|
<BR>
| t.Result здесь -- это результатное выражение.  У Вас оно названо
<BR>
| expression.
<BR>
|
<BR>
| &gt; Признаюсь в том, что я долго пытался придумать
<BR>
| &gt; осмысленный пример предложения, которое в новой семантике проще чем в
<BR>
| &gt; традиционной, но увы, видимо я слишком привык думать по старому :-(. Может
<BR>
| &gt; вы чем поможете.
<BR>
|
<BR>
| Это неудивительно, потому что семантика Ваших предложений слишком
<BR>
| просто выражается через семантику обычных рефал5-предложений.
<BR>
|
<BR>
| С другой стороны, приведённая выше часть АС позволяет записывать
<BR>
| предложения, которые выразить на Рефале-5 уже не так просто.
<BR>
|
<BR>
| Например (в синтаксисе Рефала Плюс):
<BR>
|
<BR>
| F e1 =
<BR>
|     e1 : {
<BR>
|         (s2) = s2;
<BR>
|         s2 = s2;
<BR>
|     } : {
<BR>
|         1 = &quot;Refal is cool!&quot;;
<BR>
|         2 = &quot;Refal is very cool!&quot;;
<BR>
|     };
<BR>
|
<BR>
| Чтобы записать это на Рефале-5, придётся использовать либо
<BR>
| вспомогательную функцию, либо две копии последнего блока.
<BR>
|
<BR>
|                                             Антон.
<BR>
<P><P><HR>
<UL>
<LI>application/octet-stream attachment: <A HREF="att-0428/01-REFAL_TXT.zip">REFAL_TXT.zip</A>
</UL>
<!-- attachment="01-REFAL_TXT.zip" -->
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0429.html">Savtchenko Maxim: "Re: Conditions in Refal-5."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0427.html">Sergei Romanenko: "Re: рефал или Рефал"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0425.html">Anton Orlov: "Re: Conditions in Refal-5."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0429.html">Savtchenko Maxim: "Re: Conditions in Refal-5."</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0425.html">Arkady Klimov: "Re: Conditions in Refal-5."</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:59 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
