<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Arkady Klimov (klark@bagirra.net)">
<META NAME="Subject" CONTENT="Re: Как следует компилировать рефальску операцию отождествлени">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Как следует компилировать рефальску операцию отождествлени</H1>
<HR>
<P>
<!-- received="Sat Dec  9 15:30:46 2000" -->
<!-- isoreceived="20001209123046" -->
<!-- sent="Sat, 9 Dec 2000 15:27:38 +0300" -->
<!-- isosent="20001209122738" -->
<!-- name="Arkady Klimov" -->
<!-- email="klark@bagirra.net" -->
<!-- subject="Re: Как следует компилировать рефальску операцию отождествлени" -->
<!-- id="003401c061db$6bec8a50$929943c2@swan" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="004701c0612b$402f3ee0$32e1d0c3@abrhome.polnet.botik.ru" -->
<STRONG>Subject: </STRONG>Re: Как следует компилировать рефальску операцию отождествлени<BR>
<STRONG>From: </STRONG>Arkady Klimov (<EM>klark@bagirra.net</EM>)<BR>
<STRONG>Date: </STRONG>Sat Dec 09 2000 - 15:27:38 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#163">[ date ]</A>
<A HREF="index.html#163">[ thread ]</A>
<A HREF="subject.html#163">[ subject ]</A>
<A HREF="author.html#163">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0164.html">Arkady Klimov: "Re: Re: Re: Re: Re: Как следует компилиоват ь ре фаль скую  операциюотождествлени"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0162.html">Sergei M. Abramov: "Re: Re: Re: Re: Re: Как следует компилироват ь ре фаль скую  операциюотождествления"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0161.html">Sergei M. Abramov (at home): "Re: Как следует компилировать рефальскую операцию отождествления"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0161.html">Arkady Klimov: "Re: Как следует компилировать рефальску операцию отождествлени"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
----- Original Message -----
<BR>
From: Sergei M. Abramov (at home) &lt;abram@botik.ru&gt;
<BR>
To: Arkady Klimov &lt;klark@bagirra.net&gt;; &lt;refal@botik.ru&gt;; Andrey Slepuhin &lt;pooh@msu.ru&gt;; Anton Yu. Orlov &lt;orlov@mccme.ru&gt;
<BR>
Sent: Friday, December 08, 2000 6:26 PM
<BR>
Subject: Re: Как следует компилировать рефальскую операцию отождествления
<BR>
<P><P>| Алик, привет!
<BR>
|
<BR>
| Извини, что долко молчал--замотался!
<BR>
|
<BR>
| -----Original Message-----
<BR>
| From: Arkady Klimov &lt;klark@bagirra.net&gt;
<BR>
| Date: 5 декабря 2000 г. 22:36
<BR>
| Subject: Re: Как следует компилировать рефальскую операцию отождествления
<BR>
|
<BR>
|
<BR>
| &gt;Спасибо за инициативу и интересные материалы....
<BR>
|
<BR>
| &gt;Все очень интересно.
<BR>
|
<BR>
| Спасибо на добром слове!
<BR>
|
<BR>
| &gt;Для Р+ и вообще отображение в массивное представление
<BR>
| &gt;это то, что надо.
<BR>
|
<BR>
| Кажется--да.
<BR>
|
<BR>
| &gt;Но в первом письме ты писал, что эти методы будут
<BR>
| &gt;также интересны для реализаторов Р-5 и т.п.,
<BR>
| &gt;то есть рефалов на списковом представлении.
<BR>
|
<BR>
| Да.
<BR>
|
<BR>
| &gt;У меня есть в этом сомнения, попробуй их развеять.
<BR>
| &gt;Ты справедливо замечаешь, что сложность операций
<BR>
| &gt;может быть (и будет для списков) O(L). Но дальше
<BR>
| &gt;ты писал, что алгоритм от этого не зависит.
<BR>
| &gt;Согласен, алгоритм не зависит, но сложность его
<BR>
| &gt;зависит и возможно радикально.
<BR>
|
<BR>
| Более точно, что я ХОТЕЛ сказать (но возможно мне это НЕ ОЧЕНЬ удалось) это то,
<BR>
| что ПОРА стать ревизионистами, пора навести ревизию, пора еще раз подумать.
<BR>
|
<BR>
| По крайней мере для случая квази-закрытых переменных:
<BR>
|
<BR>
|     e.Src : e1 A e1 B e1 C e1 D e1
<BR>
|
<BR>
| предложенный ревизионизм эффективен для любого представления (списковое,
<BR>
| массивное): он работает как О(len_Src), вместо классического О(len_Src^4).
<BR>
|
<BR>
АРК:
<BR>
Понятно, правда классический имеет здесь сложность О(len_Src^2) - не зависит от числа
<BR>
добавочных переменных, которые здесь все повторные.
<BR>
<P><P>| Для меня это достаточный аргумент чтобы всех ПРИЗВАТЬ к попытке ревизионизма
<BR>
| (ВСЕХ:
<BR>
|     остроконечников и тупоконечников,
<BR>
|     списочников и массивщиков,
<BR>
|     врезанных и подвешанных,
<BR>
|     со счетчиками и без).
<BR>
|
<BR>
| Думать надо всем.  Потом разбираться, в каких случаях какие методы лучше/хуже
<BR>
| для каких представлений.
<BR>
|
<BR>
| Еще раз: лично для меня достаточно демонстрации ОДНОГО ранее прозеванного
<BR>
| случая, чтобы не побояться еще раз просмотреть (не побояться сделать ревизию).
<BR>
|
<BR>
| &gt; ... Есть только опасение в том, что
<BR>
| &gt;значительная часть кода в компиляторе
<BR>
| &gt;и интелекта при его создании будут
<BR>
| &gt;потрачены как бы зря, поскольку в
<BR>
| &gt;практических программах не будут
<BR>
| &gt;востребованы ...
<BR>
|
<BR>
| Ну да, ну да...  Можно сказать (даже доказать статистической обработкай архива
<BR>
| всех в мире рефал-программ), что образцов вида &quot;e.Src : e1 A e1 B e1 C e1 D e1&quot;
<BR>
| нормальные люди ме пишут...
<BR>
|
<BR>
| Ну да, до сих пор не писали (может быть).  Но придет один новый юзер, напишет и
<BR>
| ведь стыдно будет за эффективность.
<BR>
<P>Да, я тут с удовольствием соглашусь. Именно этот мотив мы всегда используем
<BR>
в пропаганде суперкомпиляции.
<BR>
<P>|
<BR>
| &gt;Рассмотрим пример такого образца (из функции доступа к копилке):
<BR>
| &gt;
<BR>
| &gt;(e.name) (e.1 (e.name '=' e.value) e2)
<BR>
| &gt;
<BR>
| &gt;При существующей реализации его сложность - это объем символов из содержимого
<BR>
| &gt;правого списка, которые надо просмотреть при поиске.
<BR>
|
<BR>
| Ну... все-таки, я бы сказал, что О(L_name x L_storage).  И это не зависит от
<BR>
| реализации...
<BR>
|
<BR>
| &gt;Когда сравнение неудачное, это обычно
<BR>
| &gt;1-2 символа на одно имя.
<BR>
|
<BR>
| ;-)))) Посволь мне не согласиться и сказать, так &quot;когда сравнение неудачное, это
<BR>
| обычно О(L_name/2)==О(L_name) символа на одно имя.
<BR>
|
<BR>
| &gt; ... То есть время будет грубо пропорционально
<BR>
| &gt;количеству имен.
<BR>
<P>АРК:
<BR>
Я имел в виду случай, когда имена и обращения по ним &quot;хорошо перемешаны&quot;. Тогда даже при двухбуквенном алфавите средняя глубина
<BR>
(=среднее время) просмотра имени при сравнеиии будет 2 (1 с вероятностью 1/2, 2 с вероятностью 1/4 , 3 с вероятностью 1/8 и т.д.)
<BR>
<P>|
<BR>
| Ну уж нет, я бы сказал, что О(L_name x L_storage)
<BR>
|
<BR>
| &gt;Если же перед сравнением мы будет сначала вычислять длину,
<BR>
| &gt;тратя O(L), то время поиска резко увеличится в разы - пропорционально средней
<BR>
| &gt;длине имени.
<BR>
|
<BR>
| Время увеличится в О(1), сохранив порядок О(L_name x L_storage) ;-))
<BR>
|
<BR>
| &gt;Но, повторяю, мое сомнение касается только
<BR>
| &gt;применимости этих методов к списковой
<BR>
| &gt;реализации.
<BR>
|
<BR>
| Принято.  Бесспорно.
<BR>
|
<BR>
| А мои призывы были такие: лично мне одного примера достаточно для того, чтобы
<BR>
| призвать ЗАДУМАТЬСЯ.
<BR>
<P>А мне показалось, что ты утверждал, что новый метод является равномерно-неухудшающим в том числе и при списковой реализации. И
<BR>
только с этим я стал спорить.
<BR>
|
<BR>
| А после этого применять или не применять--да черт с ним, в конце концов это дело
<BR>
| вкуса (и лени) реализатора.
<BR>
|
<BR>
| В конце концов, мое любимое про программиста: &quot;Сынок, ради Бога ничего не меняй!
<BR>
| Пусть все так и остается!&quot;
<BR>
|
<BR>
| Но в главном ты прав:
<BR>
|
<BR>
| &gt; ... Но это я так написал, чтобы иметь в виду,
<BR>
| &gt;на самом деле надо продолжать в том же духе,
<BR>
| &gt;и смотреть, что получается. А там видно
<BR>
| &gt;будет.
<BR>
|
<BR>
| Это точно.  Если не пробовать, то видно не будет ;-)))
<BR>
|
<BR>
| &gt; ... Короче, я бы призывал ... вести ее разработку
<BR>
| &gt;с прицелом на векторное представление, не оглядываясь
<BR>
| &gt;на списки.
<BR>
|
<BR>
| Так и делаем.
<BR>
|
<BR>
| Разок, походя, призвали списочников оглянуться (на всякий случай) на эти
<BR>
| методы--вдруг понравится (по крайней мере в одном-то случае они эффективны ;-)?
<BR>
| Или просто из гуманистических побуждений захочется каплю свежего взгляда и
<BR>
| интеллекта потратить &quot;на чужом поле&quot;, пролить на чужую мельницу...
<BR>
|
<BR>
| Что же касается идеи &quot;поддержка длины в списочном представлении&quot;:
<BR>
|
<BR>
| &gt; ... И тут мы возвращаемся к тому с чего
<BR>
| &gt;начали - практической невозможности
<BR>
| &gt;организовать вычисление и хранение
<BR>
| &gt;длин списков с приемлемой для
<BR>
| &gt;режима интерпретации сложностью.
<BR>
|
<BR>
| Ты знаешь, чисто интуитивно я с тобою не соглашусь.  Мне все-таки &gt;&gt;кажется&lt;&lt;,
<BR>
| что
<BR>
|     ==&gt; в любой РАЗУМНОЙ списковой реализации Рефала за РАЗУМНЫЕ затраты (не
<BR>
| зависящие от длин);
<BR>
|     ==&gt; МОЖНО сделать ДЕШЕВОЕ отслеживание длин
<BR>
|             -- ВСЕХ ПОДВЕШЕННЫХ скобок,
<BR>
|             -- всех АРГУМЕНТОВ в К-термах (вызов функции--те же подвешенные
<BR>
| скобки, в некотором роде).
<BR>
|
<BR>
| Но я не готов тратить свое (и твое) время на проверку (опровержение) этого моего
<BR>
| интуитивного утверждения.  Окончательно это доказывается только завершенной
<BR>
| отлаженной реализацией и это дело реализатора из лагеря списочников (не я).
<BR>
<P>Да, мне тоже кажется, что принципиальная возможность этого существует. Но много технических сложностей.
<BR>
<P>|
<BR>
| &gt;Короче, я бы призывал не мудрствовать
<BR>
| &gt;по поводу &quot;единой для всех&quot; схемы компиляции,
<BR>
| &gt;а просто вести ее разработку с прицелом
<BR>
| &gt;на векторное представление, не оглядываясь на списки.
<BR>
|
<BR>
| Согласен с твоими призывами.  Не оглядоваемся (вот уже .... лет).
<BR>
|
<BR>
| &gt;Потом интересно будет посмотреть,
<BR>
| &gt;нельзя ли сделать заметное упрощение
<BR>
| &gt;в арсенале приемов, при котором типичные
<BR>
| &gt;случаи практически не пострадали бы.
<BR>
|
<BR>
| Ты знаешь, кажется и так все настолько просто вышло.  Пока кажется--проще
<BR>
| некуда.
<BR>
<P>Возможно.
<BR>
<P>Успехов!
<BR>
Аркадий.
<BR>
<P>|
<BR>
| Удачи,
<BR>
|
<BR>
| доживем до реализации (не за горами, я надеюсь...)
<BR>
|
<BR>
| Сергей
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0164.html">Arkady Klimov: "Re: Re: Re: Re: Re: Как следует компилиоват ь ре фаль скую  операциюотождествлени"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0162.html">Sergei M. Abramov: "Re: Re: Re: Re: Re: Как следует компилироват ь ре фаль скую  операциюотождествления"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0161.html">Sergei M. Abramov (at home): "Re: Как следует компилировать рефальскую операцию отождествления"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0161.html">Arkady Klimov: "Re: Как следует компилировать рефальску операцию отождествлени"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:58 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
