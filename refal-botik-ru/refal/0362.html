<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Leonid Belous (belous@ilt.kharkov.ua)">
<META NAME="Subject" CONTENT="Re: Ошибка в Рефал-5">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Ошибка в Рефал-5</H1>
<HR>
<P>
<!-- received="Thu Nov 13 20:44:13 2003" -->
<!-- isoreceived="20031113174413" -->
<!-- sent="Thu, 13 Nov 2003 18:55:04 +0200" -->
<!-- isosent="20031113165504" -->
<!-- name="Leonid Belous" -->
<!-- email="belous@ilt.kharkov.ua" -->
<!-- subject="Re: Ошибка в Рефал-5" -->
<!-- id="006101c3aa06$f8ccc180$013b7cc1@ilt.kharkov.ua" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="200311111254.39917.vladimi@mech.math.msu.su" -->
<STRONG>Subject: </STRONG>Re: Ошибка в Рефал-5<BR>
<STRONG>From: </STRONG>Leonid Belous (<EM>belous@ilt.kharkov.ua</EM>)<BR>
<STRONG>Date: </STRONG>Thu Nov 13 2003 - 19:55:04 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#362">[ date ]</A>
<A HREF="index.html#362">[ thread ]</A>
<A HREF="subject.html#362">[ subject ]</A>
<A HREF="author.html#362">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0363.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0361.html">Евгений  Корныхин: "работа В.Ф.Турчина"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0359.html">A.A.Vladimirov: "Ошибка  Рефал-"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0363.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0359.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Уважаемый A.A.Vladimirov!
<BR>
<P>Спасибо за ответ.
<BR>
<P>Я попытался немного отредактировать ваше письмо в смысле вставки символа LF,
<BR>
поскольку, к сожалению, все было в виде сплошной строки. И Pine и Outlook
<BR>
показывали неформатированное письмо.
<BR>
Тем более я не решился (и без Вашего согласия) отправлять его и в
<BR>
конференцию. Поэтому тоже отвечаю лично.
<BR>
<P>Во первых хотел бы узнать как Вас зовут :-).
<BR>
<P>Я прокомментирую несколько фрагментов из Вашего ответа, полностью
<BR>
приводимого ниже.
<BR>
<P>[...]
<BR>
<EM>&gt; 1) Открытая А.Столяровым дискуссия завтра отметит свой двухлетний юбилей.
</EM><BR>
За такой срок многое меняется. В частности,в результате
<BR>
<A HREF="0283.html">http://www.botik.ru/mail-archive/refal/0283.html</A> содержание Вашего сообщения
<BR>
<A HREF="0259.html">http://www.botik.ru/mail-archive/refal/0259.html</A> к сожалению, полностью
<BR>
устарело.
<BR>
<P>Я не считаю, что после трагической смерти Саши Корлюкова, его вклад в
<BR>
становление системы Рефал-5 как-то уменьшился. И не считаю, что ценность его
<BR>
работ, которые опубликованы на Рефал-сайте, полностью утрачена.
<BR>
<P>[...]
<BR>
<EM>&gt; Насколько я могу судить, увеличение последней цифры на единицу в ДАННОМ
</EM><BR>
случае обращает макроцифру в 0, то есть уменьшает на 4294967295. Поэтому
<BR>
уменьшение произведения в примере из Вашего snapshot само по себе было бы
<BR>
неудивительно.Удивительно, что уменьшение происходит, когда на единицу
<BR>
увеличивается значение во ВТОРОМ разряде (как и это и было в моём исходном
<BR>
примере).
<BR>
<P>Sorry, не заметил. У меня было не слишком много времени, чтобы разбираться с
<BR>
этим на более подробном уровне.
<BR>
<P>[...]
<BR>
<EM>&gt; Мне совершенно не нужна была (и теперь тоже не нужна) арифметика типа
</EM><BR>
real.
<BR>
<P>Я вовсе и не призывал к этому. В PHP кроме real в том же самом пакете
<BR>
<A HREF="http://www.php.net/manual/en/ref.bc.php">http://www.php.net/manual/en/ref.bc.php</A>
<BR>
есть и произвольно-разрядная целая арифметика. Раз Вы имеете дело с Linux,
<BR>
то, наверное, пробовали и ее в своих задачах? Я, правда, не уверен, что она
<BR>
эффективнее в реализации, чем в Рефал-5
<BR>
<P>[...]
<BR>
<EM>&gt; Эта ошибка уже исправлена А.Немытых.
</EM><BR>
<P>Если не секрет, как Вы об этом узнали?
<BR>
Наверное у Вас больше информации о поддержке Рефала-5, чем у меня :-).
<BR>
<P>С уважением,
<BR>
--Леонид Белоус
<BR>
<P>----- Исходное сообщение ----- 
<BR>
От: &quot;A.A.Vladimirov&quot; &lt;vladimi@mech.math.msu.su&gt;
<BR>
Кому: &quot;Leonid Belous&quot; &lt;belous@ilt.kharkov.ua&gt;
<BR>
Отправлено: 13 ноября 2003 г. 14:31
<BR>
Тема: Re: Fw: пЫЙВЛБ Ч тЕЖБМ-5
<BR>
<P><P><EM>&gt; Уважаемый Леонид Белоус!
</EM><BR>
<EM>&gt; &gt; Hi!
</EM><BR>
<EM>&gt;&gt; Прошу прощения, я не уверен, что Вы подписаны на конференцию
</EM><BR>
refal@botik.ru.
<BR>
<EM>&gt; &gt; Поэтому дублирую на ваш адрес мой ответ в конференцию.
</EM><BR>
<EM>&gt;&gt; С уважением,
</EM><BR>
<EM>&gt;&gt; --Леонид Белоус
</EM><BR>
<P><EM>&gt;Я действительно не подписан на эту конференцию, однако периодически
</EM><BR>
просматриваю её содержание. К сожалению, я не смог понять, каким образом
<BR>
можно поместить в конференцию ответ Вам именно как ответ, а не как новое
<BR>
сообщение, а потому отвечаю лично.
<BR>
<P><EM>&gt; &gt; ----- Исходное сообщение -----
</EM><BR>
<EM>&gt; &gt; От: &quot;Leonid Belous&quot; &lt;belous@ilt.kharkov.ua&gt;
</EM><BR>
<EM>&gt; &gt; Кому: &lt;refal@botik.ru&gt;
</EM><BR>
<EM>&gt; &gt; Отправлено: 12 ноября 2003 г. 18:43
</EM><BR>
<EM>&gt; &gt; Тема: Re: Ошибка в Рефал-5
</EM><BR>
<EM>&gt;&gt; &gt; &gt; Поддерживается ли в настоящее время Рефал-5 вообще идистрибутив
</EM><BR>
<EM>&gt; &gt;&gt; &gt; <A HREF="ftp://ftp.botik.ru/pub/local/scp/refal5/ref5_000925.zipв">ftp://ftp.botik.ru/pub/local/scp/refal5/ref5_000925.zipв</A> частности?
</EM><BR>
<EM>&gt; &gt;&gt; &gt; Уважаемый А.А.Владимиров,
</EM><BR>
<EM>&gt; &gt;&gt; &gt; Этот вопрос уже поднимался на этой конференции
</EM><BR>
<EM>&gt; &gt; <A HREF="0258.html">http://www.botik.ru/mail-archive/refal/0258.html</A>
</EM><BR>
<EM>&gt; &gt; и ответы на него можно посмотреть здесь
</EM><BR>
<EM>&gt; &gt; <A HREF="0259.html">http://www.botik.ru/mail-archive/refal/0259.html</A>
</EM><BR>
<EM>&gt; &gt; <A HREF="0260.html">http://www.botik.ru/mail-archive/refal/0260.html</A>
</EM><BR>
<EM>&gt; &gt;&gt; &gt; К сожалению, с того времени ситуация не изменилась в лучшую сторону
</EM><BR>
:(.
<BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; Спасибо за ссылки. Однако я задал свой вопрос именно потому, что читал
</EM><BR>
упомянутые Вами сообщения. Дело в следующем:
<BR>
<EM>&gt; 1) Открытая А.Столяровым дискуссия завтра отметит свой двухлетний юбилей.
</EM><BR>
За такой срок многое меняется. В частности,в результате
<BR>
<A HREF="0283.html">http://www.botik.ru/mail-archive/refal/0283.html</A> содержание Вашего сообщения
<BR>
<A HREF="0259.html">http://www.botik.ru/mail-archive/refal/0259.html</A> к сожалению, полностью
<BR>
устарело.
<BR>
<EM>&gt; 2) Из ответа А.Конышева <A HREF="0260.html">http://www.botik.ru/mail-archive/refal/0260.html</A>
</EM><BR>
следует, что уже два года назад дистрибутив находился в полуподвешенном
<BR>
состоянии.
<BR>
<EM>&gt; Поэтому я счёл возможным уточнить вопрос о нынешнем статусеРефала-5.
</EM><BR>
<EM>&gt; &gt; &gt; &gt; Вопрос не праздный, ибо файл arithm.c вышеупомянутого архивасодержит
</EM><BR>
<EM>&gt; &gt;&gt; &gt; грубую ошибку, а именно: в строке 637 вместоправильного оператора x =
</EM><BR>
k %
<BR>
<EM>&gt; &gt; MAX_SHORT стоит оператор x = k.Данная &quot;мелочь&quot; приводит к тому, что
</EM><BR>
<EM>&gt;&gt; средние
</EM><BR>
<EM>&gt;&gt; &gt; разрядыпроизведения многозначных (в смысле макроцифр) чиселоказываются,
</EM><BR>
<EM>&gt; &gt; вообще говоря, далеки от реальности.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; В качестве примера можно привести операции
</EM><BR>
<EM>&gt; &gt; &gt; &lt;Mul (5510 725908503 2714696811 3558488906 2579862466) 54333205256691
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 396761401 3151792086 1004175019 0
</EM><BR>
<EM>&gt;&gt; &gt;&gt; &gt; &gt; и
</EM><BR>
<EM>&gt; &gt; &gt; &lt;Mul (5510 725908503 2714696811 3558488906 2579862466) 54333205256691
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 396761401 3151792086 1004175018 4294967295&gt;.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; Результат этих операций наглядно показывает, что при УМЕНЬШЕНИИ
</EM><BR>
одного
<BR>
<EM>&gt; &gt; &gt; из&gt; &gt;&gt; &gt; сомножителей на единицу &quot;произведение&quot; может чудеснымобразом
</EM><BR>
<EM>&gt;&gt; УВЕЛИЧИВАТЬСЯ.
</EM><BR>
<EM>&gt;&gt; &gt; Спасибо за локализацию ошибки.
</EM><BR>
<EM>&gt; &gt; Поведение зависит еще от конкретной платформы.
</EM><BR>
<EM>&gt; Обычно я работаю в Linux; там и было обнаружено упомянутою мной явление. В
</EM><BR>
результате тестирования в M$ Windows'98 ошибка успешно воспроизвелась.
<BR>
<EM>&gt; &gt; &gt; Я попробовал ваш второй пример в чуть усложненном контексте. Добавил
</EM><BR>
<EM>&gt; &gt; операцию Sub и исследовал разницу исходного и измененного чисел. Заодно
</EM><BR>
<EM>&gt; &gt; выводил значения этих чисел. У меня получилось, что при увеличении
</EM><BR>
<EM>&gt;&gt; последней&gt;&gt; &gt; цифры на единицу (5 заменил на 6), результат уменьшился
</EM><BR>
<EM>&gt; &gt; (см. snapshot с моего экрана
</EM><BR>
<EM>&gt; &gt; <A HREF="http://www.refal.org/~belous/download/for_vladimirov.jpg">http://www.refal.org/~belous/download/for_vladimirov.jpg</A> ).
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; Насколько я могу судить, увеличение последней цифры на единицу в ДАННОМ
</EM><BR>
случае обращает макроцифру в 0, то есть уменьшает на 4294967295. Поэтому
<BR>
уменьшение произведения в примере из Вашего snapshot само по себе было бы
<BR>
неудивительно.Удивительно, что уменьшение происходит, когда на единицу
<BR>
увеличивается значение во ВТОРОМ разряде (как и это и было в моём исходном
<BR>
примере).
<BR>
<EM>&gt; &gt; &gt; Произвольно-разрядная арифметика в Рефале-5, насколько я знаю, не
</EM><BR>
<EM>&gt;&gt; проходила
</EM><BR>
<EM>&gt;&gt; &gt; испытаний на реальных задачах с длинными числами (более одной
</EM><BR>
<EM>&gt; &gt; макроцифры). Арифметика же типа real, которая была в языке ранее,
</EM><BR>
<EM>&gt; &gt; исключена в последней реализации Рефала-5.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; Лично я считаю Рефал-5 достаточно стабильной и отлаженной системой.
</EM><BR>
Из
<BR>
<EM>&gt; &gt; подобных ситуаций выхожу через интерфейс с PHP. Например, в системе
</EM><BR>
<EM>&gt; &gt; Refal-PHP произвольно-разрядная арифметика типа real доступна из
</EM><BR>
Рефала-5
<BR>
<EM>&gt; &gt; следующим образом
</EM><BR>
<EM>&gt;&gt;
</EM><BR>
<A HREF="http://www.refal.net/~belous/rphprdoc.htm#2.5.%20Вычисление%20математически">http://www.refal.net/~belous/rphprdoc.htm#2.5.%20Вычисление%20математически</A>&gt;х%20функций&gt;
<BR>
<EM>&gt; Мне совершенно не нужна была (и теперь тоже не нужна) арифметика типа
</EM><BR>
real. Сущностью задачи, при попытке решения которой была обнаружена ошибка
<BR>
транслятора, является нахождение точных (и не очень грубых) оценок индекса
<BR>
инерции рациональной симметрической матрицы большого порядка (сотни или даже
<BR>
тысячи). Каким образом можно решать такую задачу при помощи арифметики типа
<BR>
real, мне не вполне ясно. На мой взгляд, эта задача должна решаться именно
<BR>
на основе длинной арифметики (поскольку рациональное число есть пара целых);
<BR>
с этих позиций я к ней и подошёл.
<BR>
<EM>&gt; &gt; &gt; Еще раз спасибо за точное место указания ошибки. Надеюсь, что в
</EM><BR>
очередном
<BR>
<EM>&gt; &gt; дистрибутиве Рефала-5 эта ошибка будет исправлена.
</EM><BR>
<EM>&gt; Эта ошибка уже исправлена А.Немытых.
</EM><BR>
<P><EM>&gt; &gt; &gt;&gt; &gt; С уважением,
</EM><BR>
<EM>&gt; &gt; --Леонид Белоус
</EM><BR>
<EM>&gt; &gt;&gt; &gt;&gt; &gt; ----- Исходное сообщение -----
</EM><BR>
<EM>&gt; &gt; От: &quot;A.A.Vladimirov&quot; &lt;vladimi@mech.math.msu.su
</EM><BR>
<EM>&gt;&gt; &gt; Кому: &lt;refal@botik.ru
</EM><BR>
<EM>&gt;&gt; &gt; Отправлено: 11 ноября 2003 г. 11:54
</EM><BR>
<EM>&gt; &gt; Тема: Ошибка в Рефал-5
</EM><BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0363.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0361.html">Евгений  Корныхин: "работа В.Ф.Турчина"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0359.html">A.A.Vladimirov: "Ошибка  Рефал-"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0363.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0359.html">Leonid Belous: "Re: Ошибка в Рефал-5"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:59 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
