<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Sergei M. Abramov (at home) (abram@botik.ru)">
<META NAME="Subject" CONTENT="Re: Как следует компилировать рефальскую операцию отождествления">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Как следует компилировать рефальскую операцию отождествления</H1>
<HR>
<P>
<!-- received="Sat Dec  9 10:08:02 2000" -->
<!-- isoreceived="20001209070802" -->
<!-- sent="Fri, 8 Dec 2000 18:26:35 +0300" -->
<!-- isosent="20001208152635" -->
<!-- name="Sergei M. Abramov (at home)" -->
<!-- email="abram@botik.ru" -->
<!-- subject="Re: Как следует компилировать рефальскую операцию отождествления" -->
<!-- id="004701c0612b$402f3ee0$32e1d0c3@abrhome.polnet.botik.ru" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="Как следует компилировать рефальскую операцию отождествления" -->
<STRONG>Subject: </STRONG>Re: Как следует компилировать рефальскую операцию отождествления<BR>
<STRONG>From: </STRONG>Sergei M. Abramov (at home) (<EM>abram@botik.ru</EM>)<BR>
<STRONG>Date: </STRONG>Fri Dec 08 2000 - 18:26:35 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#161">[ date ]</A>
<A HREF="index.html#161">[ thread ]</A>
<A HREF="subject.html#161">[ subject ]</A>
<A HREF="author.html#161">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0162.html">Sergei M. Abramov: "Re: Re: Re: Re: Re: Как следует компилироват ь ре фаль скую  операциюотождествления"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0160.html">Arkady Klimov: "Re: Re: Re: Re: Re: Как следует компилиоват ь ре фаль скую  операциюотождествлени"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="0137.html">Sergei M. Abramov: "Как следует компилировать рефальскую операцию отождествления"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0163.html">Arkady Klimov: "Re: Как следует компилировать рефальску операцию отождествлени"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0137.html">Sergei M. Abramov (at home): "Re: Как следует компилировать рефальскую операцию отождествления"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Алик, привет!
<BR>
<P>Извини, что долко молчал--замотался!
<BR>
<P>-----Original Message-----
<BR>
From: Arkady Klimov &lt;klark@bagirra.net&gt;
<BR>
Date: 5 декабря 2000 г. 22:36
<BR>
Subject: Re: Как следует компилировать рефальскую операцию отождествления
<BR>
<P><P><EM>&gt;Спасибо за инициативу и интересные материалы....
</EM><BR>
<P><EM>&gt;Все очень интересно.
</EM><BR>
<P>Спасибо на добром слове!
<BR>
<P><EM>&gt;Для Р+ и вообще отображение в массивное представление
</EM><BR>
<EM>&gt;это то, что надо.
</EM><BR>
<P>Кажется--да.
<BR>
<P><EM>&gt;Но в первом письме ты писал, что эти методы будут
</EM><BR>
<EM>&gt;также интересны для реализаторов Р-5 и т.п.,
</EM><BR>
<EM>&gt;то есть рефалов на списковом представлении.
</EM><BR>
<P>Да.
<BR>
<P><EM>&gt;У меня есть в этом сомнения, попробуй их развеять.
</EM><BR>
<EM>&gt;Ты справедливо замечаешь, что сложность операций
</EM><BR>
<EM>&gt;может быть (и будет для списков) O(L). Но дальше
</EM><BR>
<EM>&gt;ты писал, что алгоритм от этого не зависит.
</EM><BR>
<EM>&gt;Согласен, алгоритм не зависит, но сложность его
</EM><BR>
<EM>&gt;зависит и возможно радикально.
</EM><BR>
<P>Более точно, что я ХОТЕЛ сказать (но возможно мне это НЕ ОЧЕНЬ удалось) это то,
<BR>
что ПОРА стать ревизионистами, пора навести ревизию, пора еще раз подумать.
<BR>
<P>По крайней мере для случая квази-закрытых переменных:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;e.Src : e1 A e1 B e1 C e1 D e1
<BR>
<P>предложенный ревизионизм эффективен для любого представления (списковое,
<BR>
массивное): он работает как О(len_Src), вместо классического О(len_Src^4).
<BR>
<P>Для меня это достаточный аргумент чтобы всех ПРИЗВАТЬ к попытке ревизионизма
<BR>
(ВСЕХ:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;остроконечников и тупоконечников,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;списочников и массивщиков,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;врезанных и подвешанных,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;со счетчиками и без).
<BR>
<P>Думать надо всем.  Потом разбираться, в каких случаях какие методы лучше/хуже
<BR>
для каких представлений.
<BR>
<P>Еще раз: лично для меня достаточно демонстрации ОДНОГО ранее прозеванного
<BR>
случая, чтобы не побояться еще раз просмотреть (не побояться сделать ревизию).
<BR>
<P><EM>&gt; ... Есть только опасение в том, что
</EM><BR>
<EM>&gt;значительная часть кода в компиляторе
</EM><BR>
<EM>&gt;и интелекта при его создании будут
</EM><BR>
<EM>&gt;потрачены как бы зря, поскольку в
</EM><BR>
<EM>&gt;практических программах не будут
</EM><BR>
<EM>&gt;востребованы ...
</EM><BR>
<P>Ну да, ну да...  Можно сказать (даже доказать статистической обработкай архива
<BR>
всех в мире рефал-программ), что образцов вида &quot;e.Src : e1 A e1 B e1 C e1 D e1&quot;
<BR>
нормальные люди ме пишут...
<BR>
<P>Ну да, до сих пор не писали (может быть).  Но придет один новый юзер, напишет и
<BR>
ведь стыдно будет за эффективность.
<BR>
<P><EM>&gt;Рассмотрим пример такого образца (из функции доступа к копилке):
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;(e.name) (e.1 (e.name '=' e.value) e2)
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;При существующей реализации его сложность - это объем символов из содержимого
</EM><BR>
<EM>&gt;правого списка, которые надо просмотреть при поиске.
</EM><BR>
<P>Ну... все-таки, я бы сказал, что О(L_name x L_storage).  И это не зависит от
<BR>
реализации...
<BR>
<P><EM>&gt;Когда сравнение неудачное, это обычно
</EM><BR>
<EM>&gt;1-2 символа на одно имя.
</EM><BR>
<P>;-)))) Посволь мне не согласиться и сказать, так &quot;когда сравнение неудачное, это
<BR>
обычно О(L_name/2)==О(L_name) символа на одно имя.
<BR>
<P><EM>&gt; ... То есть время будет грубо пропорционально
</EM><BR>
<EM>&gt;количеству имен.
</EM><BR>
<P>Ну уж нет, я бы сказал, что О(L_name x L_storage)
<BR>
<P><EM>&gt;Если же перед сравнением мы будет сначала вычислять длину,
</EM><BR>
<EM>&gt;тратя O(L), то время поиска резко увеличится в разы - пропорционально средней
</EM><BR>
<EM>&gt;длине имени.
</EM><BR>
<P>Время увеличится в О(1), сохранив порядок О(L_name x L_storage) ;-))
<BR>
<P><EM>&gt;Но, повторяю, мое сомнение касается только
</EM><BR>
<EM>&gt;применимости этих методов к списковой
</EM><BR>
<EM>&gt;реализации.
</EM><BR>
<P>Принято.  Бесспорно.
<BR>
<P>А мои призывы были такие: лично мне одного примера достаточно для того, чтобы
<BR>
призвать ЗАДУМАТЬСЯ.
<BR>
<P>А после этого применять или не применять--да черт с ним, в конце концов это дело
<BR>
вкуса (и лени) реализатора.
<BR>
<P>В конце концов, мое любимое про программиста: &quot;Сынок, ради Бога ничего не меняй!
<BR>
Пусть все так и остается!&quot;
<BR>
<P>Но в главном ты прав:
<BR>
<P><EM>&gt; ... Но это я так написал, чтобы иметь в виду,
</EM><BR>
<EM>&gt;на самом деле надо продолжать в том же духе,
</EM><BR>
<EM>&gt;и смотреть, что получается. А там видно
</EM><BR>
<EM>&gt;будет.
</EM><BR>
<P>Это точно.  Если не пробовать, то видно не будет ;-)))
<BR>
<P><EM>&gt; ... Короче, я бы призывал ... вести ее разработку
</EM><BR>
<EM>&gt;с прицелом на векторное представление, не оглядываясь
</EM><BR>
<EM>&gt;на списки.
</EM><BR>
<P>Так и делаем.
<BR>
<P>Разок, походя, призвали списочников оглянуться (на всякий случай) на эти
<BR>
методы--вдруг понравится (по крайней мере в одном-то случае они эффективны ;-)?
<BR>
Или просто из гуманистических побуждений захочется каплю свежего взгляда и
<BR>
интеллекта потратить &quot;на чужом поле&quot;, пролить на чужую мельницу...
<BR>
<P>Что же касается идеи &quot;поддержка длины в списочном представлении&quot;:
<BR>
<P><EM>&gt; ... И тут мы возвращаемся к тому с чего
</EM><BR>
<EM>&gt;начали - практической невозможности
</EM><BR>
<EM>&gt;организовать вычисление и хранение
</EM><BR>
<EM>&gt;длин списков с приемлемой для
</EM><BR>
<EM>&gt;режима интерпретации сложностью.
</EM><BR>
<P>Ты знаешь, чисто интуитивно я с тобою не соглашусь.  Мне все-таки &gt;&gt;кажется&lt;&lt;,
<BR>
что
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;==&gt; в любой РАЗУМНОЙ списковой реализации Рефала за РАЗУМНЫЕ затраты (не
<BR>
зависящие от длин);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;==&gt; МОЖНО сделать ДЕШЕВОЕ отслеживание длин
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- ВСЕХ ПОДВЕШЕННЫХ скобок,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- всех АРГУМЕНТОВ в К-термах (вызов функции--те же подвешенные
<BR>
скобки, в некотором роде).
<BR>
<P>Но я не готов тратить свое (и твое) время на проверку (опровержение) этого моего
<BR>
интуитивного утверждения.  Окончательно это доказывается только завершенной
<BR>
отлаженной реализацией и это дело реализатора из лагеря списочников (не я).
<BR>
<P><EM>&gt;Короче, я бы призывал не мудрствовать
</EM><BR>
<EM>&gt;по поводу &quot;единой для всех&quot; схемы компиляции,
</EM><BR>
<EM>&gt;а просто вести ее разработку с прицелом
</EM><BR>
<EM>&gt;на векторное представление, не оглядываясь на списки.
</EM><BR>
<P>Согласен с твоими призывами.  Не оглядоваемся (вот уже .... лет).
<BR>
<P><EM>&gt;Потом интересно будет посмотреть,
</EM><BR>
<EM>&gt;нельзя ли сделать заметное упрощение
</EM><BR>
<EM>&gt;в арсенале приемов, при котором типичные
</EM><BR>
<EM>&gt;случаи практически не пострадали бы.
</EM><BR>
<P>Ты знаешь, кажется и так все настолько просто вышло.  Пока кажется--проще
<BR>
некуда.
<BR>
<P>Удачи,
<BR>
<P>доживем до реализации (не за горами, я надеюсь...)
<BR>
<P>Сергей
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0162.html">Sergei M. Abramov: "Re: Re: Re: Re: Re: Как следует компилироват ь ре фаль скую  операциюотождествления"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0160.html">Arkady Klimov: "Re: Re: Re: Re: Re: Как следует компилиоват ь ре фаль скую  операциюотождествлени"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="0137.html">Sergei M. Abramov: "Как следует компилировать рефальскую операцию отождествления"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0163.html">Arkady Klimov: "Re: Как следует компилировать рефальску операцию отождествлени"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0137.html">Sergei M. Abramov (at home): "Re: Как следует компилировать рефальскую операцию отождествления"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:58 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
