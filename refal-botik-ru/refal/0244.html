<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Arkady Klimov (klark@bagirra.net)">
<META NAME="Subject" CONTENT="Re: Компиляция Refal6 для Linu">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Компиляция Refal6 для Linu</H1>
<HR>
<P>
<!-- received="Sun Oct 28 08:21:26 2001" -->
<!-- isoreceived="20011028052126" -->
<!-- sent="Fri, 26 Oct 2001 20:28:50 +0400" -->
<!-- isosent="20011026162850" -->
<!-- name="Arkady Klimov" -->
<!-- email="klark@bagirra.net" -->
<!-- subject="Re: Компиляция Refal6 для Linu" -->
<!-- id="007901c15e3b$5a959b40$110d040a@Bagirra" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="05c701c15e2e$e74c7a20$0100a8c0@piii" -->
<STRONG>Subject: </STRONG>Re: Компиляция Refal6 для Linu<BR>
<STRONG>From: </STRONG>Arkady Klimov (<EM>klark@bagirra.net</EM>)<BR>
<STRONG>Date: </STRONG>Fri Oct 26 2001 - 20:28:50 MSD
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#244">[ date ]</A>
<A HREF="index.html#244">[ thread ]</A>
<A HREF="subject.html#244">[ subject ]</A>
<A HREF="author.html#244">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0245.html">dmsidorov@mtu-net.ru: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0243.html">Andrei Klimov: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0243.html">Andrei Klimov: "Re: Компиляция Refal6 для Linu"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0246.html">dmsidorov@mtu-net.ru: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0243.html">Arkady Klimov: "Re: Компиляция Refal6 для Linu"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Здравствуйте, Дмитрий,
<BR>
с указанной Вами ошибкой я в некоторой растерянности. (На С
<BR>
я уже более 5 лет не работаю). Почему-то до сих пор ни один
<BR>
компилятор в этом месте не брыкался. Что сие означает? Верно
<BR>
ли, что по стандарту языка правая часть инициализатора обязана
<BR>
быть константой? И почему stderr - не константа? (Понятно, что
<BR>
это не константа периода компиляции, но содержательно, в
<BR>
общем-то как бы константа). Я считал ее (содержательно)
<BR>
константой и завел переменную stdtrc (она размещается в
<BR>
модуле RFSTOR.C) исключительно для того, чтобы в процессе
<BR>
работы можно было подменять поток вывода информации о
<BR>
трассировке. Эта подмена делается в модуле RBEVAL.C, строка 220.
<BR>
Происходит это по запросу юзера в диалоге. Если бы не эта
<BR>
потребность, можно было бы отождествить stdtrc с stderr и все.
<BR>
Может Вы сами, или кто еще из знатоков С может подсказать,
<BR>
как лучше решить данную проблему.
<BR>
<P>В принципе, можно, наверно, поступить и так:
<BR>
<P>1.удалить эту строку 43 rfstor.h
<BR>
<P>2.заменить строку 40 rfstor.h на строку:
<BR>
EXT FILE *    stdtrc;           /* File for debug information       */
<BR>
(было:
<BR>
extern FILE *    stdtrc;           /* File for debug information       */
<BR>
)
<BR>
<P>3. Вставить инициализацию
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;stdtrc = stderr;
<BR>
первым оператором в функцию initstor (файл rfstor.c, строка 256)
<BR>
(эта функция вызывается первой в функции main).
<BR>
<P>Напишите, как получилось (сохраните этот текст в ответе), я тогда
<BR>
сделаю эту правку в своих исходниках (или пришлите новые файлы
<BR>
rfstor.c, rfstor.h).
<BR>
<P>А еще напишите, какая дата последнего изменения у файлов
<BR>
в имеющемся у Вас архиве исходников.
<BR>
<P>Всего наилучшего,
<BR>
<P>Аркадий.
<BR>
<P>----- Original Message -----
<BR>
From: Andrei Klimov &lt;klimov@keldysh.ru&gt;
<BR>
To: &lt;dmsidorov@mtu-net.ru&gt;
<BR>
Cc: &lt;refal@botik.ru&gt;
<BR>
Sent: Friday, October 26, 2001 6:54 PM
<BR>
Subject: Re: Компиляция Refal6 для Linux
<BR>
<P><P>| Дмитрий, добрый день!
<BR>
|
<BR>
| Большое спасибо за интерес к Рефалу вообще и к Рефалу6 в частности!
<BR>
|
<BR>
| Детали реализаций Рефала у меня сейчас не &quot;в активе&quot;,
<BR>
| потому к сожалению я не могу ответить конкретно на Ваш вопрос.
<BR>
| Да и автор Рефала-6 не я, а Аркадий Климов.
<BR>
|
<BR>
| Ваш вопрос вполне подходит для списка рассылки refal@botik.ru,
<BR>
| а детали можно спросить непосредственно у авторов реализаций.
<BR>
| Поэтому отвечаю Вам, включив в СС refal@botik.ru.
<BR>
| Аркадий получит через него Ваше письмо, а с переносом под Юникс,
<BR>
| может, поможет еще кто-нибудь из рефал-активистов.
<BR>
|
<BR>
| Архив списков рассылки refal@botik.ru и refal-plus@botik.ru
<BR>
| Вы можете посмотреть здесь:
<BR>
| - <A HREF="index.html">http://www.botik.ru/mail-archive/refal/</A>
<BR>
| - <A HREF="../refal-plus/index.html">http://www.botik.ru/mail-archive/refal-plus/</A>
<BR>
| Если хотите, я Вас на них подпишу.
<BR>
|
<BR>
| Всего наилучшего,
<BR>
|
<BR>
| Андрей.
<BR>
|
<BR>
| PS. Занятно, что я и не слышал, что Рефал был
<BR>
| &quot;одним из базисных языков суперкомпьютеров серии Эльбрус&quot;.
<BR>
| Это действительно так?
<BR>
|
<BR>
| ----- Original Message -----
<BR>
| From: dmsidorov@mtu-net.ru
<BR>
| To: klimov@keldysh.ru
<BR>
| Sent: Thursday, 25 October 2001 22:37
<BR>
| Subject: Компиляция Refal6 для Linux
<BR>
|
<BR>
| Здравствуйте, Андрей Климов.
<BR>
|
<BR>
| После статьи и интервью В.Ф. Турчина журналу &quot;Компьютерра&quot; я сильно
<BR>
| заинтересовался языком Рефал. До этого он был мне известен лишь как
<BR>
| один из базисных языков суперкомпьютеров серии &quot;Эльбрус&quot;. Мне хотелось
<BR>
| бы попробовать Рефал и сделать пакет для его установки в системе Debian
<BR>
| GNU/Linux, и при возможности включить его в стандартную поставку. К
<BR>
| сожалению, компиляция завершилась неудачей со следующим сообщением
<BR>
| об ошибке:
<BR>
|
<BR>
| gcc rfstor.c -O -c -ggdb
<BR>
| In file included from refcom.h:55,
<BR>
|                  from refgen.h:16,
<BR>
|                  from refint.h:14,
<BR>
|                  from rfstor.c:6:
<BR>
| rfstor.h:43: initializer element is not constant
<BR>
|
<BR>
| Строка 43 rfstor.h содержит определение нового потока вывода:
<BR>
|
<BR>
|        FILE * stdtrc = stderr;
<BR>
|
<BR>
| Для компиляции был использован компилятор gcc 2.95.2 с поставляемой вместе
<BR>
| с ним библиотекой классов c++ и glibc 2.1.3. В качестве Makefile и config.h
<BR>
| были взяты соответственно MAKEFILU и CONFIG3.H. Пожалуйста, помогите
<BR>
| разобраться с ошибкой.
<BR>
|
<BR>
| С уважением,
<BR>
| Дмитрий Сидоров.
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0245.html">dmsidorov@mtu-net.ru: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0243.html">Andrei Klimov: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0243.html">Andrei Klimov: "Re: Компиляция Refal6 для Linu"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0246.html">dmsidorov@mtu-net.ru: "Re: Компиляция Refal6 для Linu"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0243.html">Arkady Klimov: "Re: Компиляция Refal6 для Linu"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:59 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
