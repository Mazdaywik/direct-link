<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Andrei Klimov (Andrei.Klimov@supercompilers.com)">
<META NAME="Subject" CONTENT="Re: Evolution of programming languages Was: Об отсечениях внутри блока.">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Evolution of programming languages Was: Об отсечениях внутри блока.</H1>
<HR>
<P>
<!-- received="Thu Nov 30 17:35:08 2000" -->
<!-- isoreceived="20001130143508" -->
<!-- sent="Thu, 30 Nov 2000 08:18:04 -0500" -->
<!-- isosent="20001130131804" -->
<!-- name="Andrei Klimov" -->
<!-- email="Andrei.Klimov@supercompilers.com" -->
<!-- subject="Re: Evolution of programming languages Was: Об отсечениях внутри блока." -->
<!-- id="015e01c05ad0$44a14150$2b00a8c0@scp1" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="008601c05acc$7aa81d40$929943c2@swan" -->
<STRONG>Subject: </STRONG>Re: Evolution of programming languages Was: Об отсечениях внутри блока.<BR>
<STRONG>From: </STRONG>Andrei Klimov (<EM>Andrei.Klimov@supercompilers.com</EM>)<BR>
<STRONG>Date: </STRONG>Thu Nov 30 2000 - 16:18:04 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#145">[ date ]</A>
<A HREF="index.html#145">[ thread ]</A>
<A HREF="subject.html#145">[ subject ]</A>
<A HREF="author.html#145">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0146.html">Andrey Slepuhin: "Some links"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0144.html">Arkady Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0144.html">Arkady Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0147.html">Anton Yu. Orlov: "Re: Evolution of programming languages (Was:  Об отсечениях внутри блока.)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0144.html">Andrei Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Добрый день!
<BR>
<P>Хочу лишь усилить последнюю ремарку Аркадия.
<BR>
Процитирую ее сюда, оставив его письмо ниже без изменения:
<BR>
<P><EM>&gt; Теперь было бы интересно узнать, как обстоят дела с отсечениями в АС и его реализации?
</EM><BR>
<EM>&gt; Нет ли там ограничения, исходящего от Рефала Плюс: что нет переходов по отсечениям изнутри
</EM><BR>
<EM>&gt; блока в роли источника. Надеюсь, что нет, иначе о перспективе перевода с Рефала-6
</EM><BR>
<EM>&gt; в АС можно будет забыть.
</EM><BR>
<P>А это забывать нельзя! -- Ну, точнее говоря: &quot;можно&quot;, но  лишь
<BR>
посчитав, что Рефал-6 *неправильно* ухватывает логику Рефалов.
<BR>
<P>Обобщение Рефалов -- это одна из основных цель разработки AC!
<BR>
<P>В свое время Рефал Плюс выполнил (с точностью до каких-то &quot;мелочей&quot;)
<BR>
роль обобщения Рефала-5, когда подразумеваемые,
<BR>
но кое-где торчащие колесики логики языка стали *явными*
<BR>
(что, я уверен, очень важно, про условии, конечно, что это удается).
<BR>
Причем это делалось в &quot;стесненных&quot; условиях, когда
<BR>
авторы хотели сохранить *дизайн* Рефала-5.
<BR>
<P>А абстрактный синтаксис Рефалов -- АС --
<BR>
это по определению логика чистой воды.
<BR>
Никаких дизайновых ограничений для него не существует!
<BR>
Поэтому если он не выполнить роль *Рефал-логики*, то
<BR>
-- извините за пафос -- грош ему цена! ;-)
<BR>
<P>Кстати, пожалуй, правильнее было бы называть:
<BR>
АСС -- абстрактный  синтаксис и *семантика*,
<BR>
ибо нам нужна формальная система, в которой
<BR>
был бы определен не только синтаксис, но и все.
<BR>
<P>Успехов!
<BR>
<P>Андрей.
<BR>
<P>----- Original Message -----
<BR>
From: &quot;Arkady Klimov&quot; &lt;klark@bagirra.net&gt;
<BR>
To: &quot;Andrei Klimov&quot; &lt;Andrei.Klimov@supercompilers.com&gt;; &quot;refal&quot; &lt;refal@botik.ru&gt;
<BR>
Cc: &quot;Fedor Romanenko&quot; &lt;fedor@blues.ru&gt;
<BR>
Sent: Thursday, November 30, 2000 07:52
<BR>
Subject: Re: Evolution of programming languages (Was: Об отсечениях внутри блока.)
<BR>
<P><EM>&gt; Привет всем.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Возможно, я в своем письме &quot;погорячился&quot; с сомнениями в ценности откатов,
</EM><BR>
<EM>&gt; на самом деле они (сомнения) касались ТОЛЬКО особенных средств
</EM><BR>
<EM>&gt; УПРАВЛЕНИЯ откатами (отсечений и заборов), сами же откаты
</EM><BR>
<EM>&gt; (откатные функции, прозрачные блоки) я, напротив, очень ценю.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; В связи с этим хочу высказаться по поводу дизайна откатности в Рефале-Плюс и Рефале-6.
</EM><BR>
<EM>&gt; Пожалуй, тут самая большая разница между ними.
</EM><BR>
<EM>&gt; Основные понятия, связанные с откатностью - это понятие откатной/безоткатной
</EM><BR>
<EM>&gt; функции, прозрачного/непрозрачного блоков, и семантика
</EM><BR>
<EM>&gt; знака равенства. (К отсечениям и заборам
</EM><BR>
<EM>&gt; вернемся позже). По этим понятием сравнение выглядит так:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;  В Р+ - по умолчанию функции безоткатные, по специальному указанию - откатные,
</EM><BR>
<EM>&gt; аналогично блоки: по умолчанию непрозрачные, по специальному указанию - прозрачные.
</EM><BR>
<EM>&gt; В Р6 - все функции откатные (потенциально), все блоки прозрачные.
</EM><BR>
<EM>&gt; Согласно моим представлениям, автор Р+ отказался от решения считать функции и
</EM><BR>
<EM>&gt; обычные блоки {...} прозрачными по умолчанию только из соображений
</EM><BR>
<EM>&gt; преемственности с Рефалом-5, где все блоки непрозрачные,
</EM><BR>
<EM>&gt; при этом как бы &quot;наступая на горло&quot; своим представлениям
</EM><BR>
<EM>&gt; о логичности дизайна (возможно я чересчур категоричен).
</EM><BR>
<EM>&gt; Но, к сожалению, жизнь показала, что эта &quot;совместимость&quot;
</EM><BR>
<EM>&gt; так и осталась невостребованной: если по-мелкому, то
</EM><BR>
<EM>&gt; общее подмножество, можно сказать, есть и при альтернативном решении
</EM><BR>
<EM>&gt; (если говорить о программах, которые не завершаются аварийно),
</EM><BR>
<EM>&gt; а если по-крупному, так все равно приходится строить конверторы.
</EM><BR>
<EM>&gt; И, опять же к сожалению (но это моя субъективная эмоция),
</EM><BR>
<EM>&gt; Рефалу Плюс теперь приходится и дальше оставаться
</EM><BR>
<EM>&gt; в рамках этого же дизайна, уже для совместимости с самим собой.
</EM><BR>
<EM>&gt; В этом смысле Рефал-6 имеет альтернативный дизайн,
</EM><BR>
<EM>&gt; который внутренне я считаю более логичным и потому не видел
</EM><BR>
<EM>&gt; целесообразности отказываться от него в движении к Рефалу Плюс.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Теперь о равенстве. Нагрузка на этот знак тоже разная, причем и тут и там его семантика
</EM><BR>
<EM>&gt; является обобщением его семантики в Рефале-5, но разными обобщениями. Напомню:
</EM><BR>
<EM>&gt; В Р+ равенство означает откат на уровень функции (с точки зрения заборов и отсечений оно
</EM><BR>
<EM>&gt; равносильно запятой, перед которой стоит достаточное количество отсечений).
</EM><BR>
<EM>&gt; В Р6 равенство означает абсолютную преграду для откатов, в силу чего в случае неуспеха
</EM><BR>
<EM>&gt; справа от него просто происходит авария (unexpected Fail или &quot;отождествление невозможно&quot;,
</EM><BR>
<EM>&gt; в нынешнем рефале-6 аварии не перехватываются, в Рефале Плюс есть перехваты аварий).
</EM><BR>
<EM>&gt; В связи с этим уместно заметить, что если рассмотреть Базисный подмножества
</EM><BR>
<EM>&gt; Рефала-5 и Рефала-6, то семантики будут совпадать полностью даже с точки зрения аварий,
</EM><BR>
<EM>&gt; несмотря на откатность функций рефала-6: этот откат всегда будет пойман равенством
</EM><BR>
<EM>&gt; перед правой частью, породившей этот вызов. Даже локализация аварии будет такой же,
</EM><BR>
<EM>&gt; благодаря тому, что после равенства все вызовы метятся компилятором как безоткатные.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Теперь вернемся к вопросу о блоках: в рефале-6 все блоки прозрачные. А как сделать блок
</EM><BR>
<EM>&gt; непрозрачным? Очень просто - поставить перед ним равенство вместо запятой. Это если
</EM><BR>
<EM>&gt; он был результатным, то есть каждая его ветвь начинается с результатного выражения.
</EM><BR>
<EM>&gt; А если он был образцовым, то можно поставить равенство чуть раньше, а если это
</EM><BR>
<EM>&gt; неадекватно (например из источника тоже могут быть откаты), то можно,
</EM><BR>
<EM>&gt; используя новую е-переменную ez, заменить :{ на :ez = ez:{. (Есть еще возможность просто
</EM><BR>
<EM>&gt; заменить одиночное двоеточие на двойное). Также можно обойтись и с
</EM><BR>
<EM>&gt; телом функции, начав его с ez = ez: . И получается, что практическая надобность
</EM><BR>
<EM>&gt; в безоткатности как специальном средстве языка отпадает.
</EM><BR>
<EM>&gt; Таким образом, иная семантика равенства в рефале-6 и отсутствие явного указания
</EM><BR>
<EM>&gt; о безоткатности - очень связанные аспекты. Аналогично с функциями: можно сказать,
</EM><BR>
<EM>&gt; что откатность функции в Рефале+ управляется декларацией функции, в рефале-6 -
</EM><BR>
<EM>&gt; вызовом (точнее, контекстом вызова).
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; А насчет той роли, которую равенство играет в Рефале Плюс - так она и там выразима через
</EM><BR>
<EM>&gt; отсечения, как уже было замечено. При переводе в рефал-6 именно так и нужно будет его выражать.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Теперь перейдем к отсечениям и заборам. В целом это решено примерно одинаково,
</EM><BR>
<EM>&gt; различия есть в обозначениях и в том, что было замечено в предыдущих письмах:
</EM><BR>
<EM>&gt; в Р+ из блока в роли источника не может выйти усиленный отсечением неуспех, в Р6 может.
</EM><BR>
<EM>&gt; Конечно, было бы интересно проанализировать и понять, с чем это связано. Возможная
</EM><BR>
<EM>&gt; гипотеза - блок в роли источника Р+ трактует как результат раскрытия вызова функции.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Вообще, думаю, прав Андрей К, что нужно &quot;поверить алгеброй гармонию&quot;:
</EM><BR>
<EM>&gt; испытать колесики дизайна на оселке метавычислений. Раскрытие вызова - это
</EM><BR>
<EM>&gt; как раз элемент метавычислений. С этой точки зрения, например, семантика равенства
</EM><BR>
<EM>&gt; в рефале Плюс может оказаться не вполне адекватной, если, конечно,
</EM><BR>
<EM>&gt; его не заменить на точное число отсечений еще при вводе.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Осмелюсь высказать такую гипотезу, которая видимо, верна как для Р+ так и для Р6:
</EM><BR>
<EM>&gt; если заборы и отсечения &quot;правильно сбалансированы (неформально: для каждого
</EM><BR>
<EM>&gt; отсечения соответствующий забор поставлен явно), то (при условии замены = на
</EM><BR>
<EM>&gt; отсечения в Р+) можно будет выполнять раскрытие вызовов (на верхнем уровне
</EM><BR>
<EM>&gt; выражения) в блоки, просто вставляя тело функции (сохряняя откатность как
</EM><BR>
<EM>&gt; прозрачность блока в Р+) через двоеточие после аргумента.
</EM><BR>
<EM>&gt; Обратную свертку блока в фукцию можно делать только с блоками-источниками Рефала Плюс,
</EM><BR>
<EM>&gt; а с завершающими блоками, и с любыми блоками Рефала-6 этого, вообще говоря, делать нельзя
</EM><BR>
<EM>&gt; (из-за возможных избыточных отсечений внутри блока).
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Теперь было бы интересно узнать, как обстоят дела с отсечениями в АС и его реализации?
</EM><BR>
<EM>&gt; Нет ли там ограничения, исходящего от рефала Плюс: что нет переходов по отсечениям изнутри
</EM><BR>
<EM>&gt; блока в роли источника. Надеюсь, что нет, иначе о перспективе переводе с Рефала-6
</EM><BR>
<EM>&gt; в АС можно будет забыть.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Аркадий
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; ----- Original Message -----
</EM><BR>
<EM>&gt; From: Andrei Klimov &lt;Andrei.Klimov@supercompilers.com&gt;
</EM><BR>
<EM>&gt; To: &lt;refal@botik.ru&gt;
</EM><BR>
<EM>&gt; Cc: Fedor Romanenko &lt;fedor@blues.ru&gt;
</EM><BR>
<EM>&gt; Sent: Tuesday, November 28, 2000 2:20 AM
</EM><BR>
<EM>&gt; Subject: Re: Evolution of programming languages (Was: Об отсечениях внутри блока.)
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; | Сергей, добрый день!
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | &gt; Добрый день!
</EM><BR>
<EM>&gt; | &gt;
</EM><BR>
<EM>&gt; | &gt; &gt; AнК:
</EM><BR>
<EM>&gt; | &gt; &gt; Также соглашусь с ним в вопросе, что SML более богатый язык,
</EM><BR>
<EM>&gt; | &gt; &gt; чем Рефал Плюс (по числу понятий, считаемых штуками или
</EM><BR>
<EM>&gt; | &gt; &gt; попугаями -- кто как хочет;-) -- именно поэтому я сейчас
</EM><BR>
<EM>&gt; | &gt; &gt; делаю большой проект на SML-е, а не на Рефале.
</EM><BR>
<EM>&gt; | &gt; &gt; ...
</EM><BR>
<EM>&gt; | &gt; &gt; Однако, &quot;богатство&quot; языка надо считать, конечно, не &quot;попугаями&quot;,
</EM><BR>
<EM>&gt; | &gt; &gt; а сопоставляя языковые механизмы и понятия с *целями языка*.
</EM><BR>
<EM>&gt; | &gt;
</EM><BR>
<EM>&gt; | &gt; СР:
</EM><BR>
<EM>&gt; | &gt; Понятное дело... Но ведь я и не сказал, что SML - &quot;хороший&quot; язык, потому что
</EM><BR>
<EM>&gt; | &gt; в нем много всего! Наоборот, я похвалил его как раз за то, чего в нем нет. И
</EM><BR>
<EM>&gt; | &gt; рассуждал с точки зрения пользователя определенного типа: а именно, такого,
</EM><BR>
<EM>&gt; | &gt; который хочет строить свой мир из конструктора (поскольку мне самому это
</EM><BR>
<EM>&gt; | &gt; нравится). Но ведь такой способ работы устраивает не всех!
</EM><BR>
<EM>&gt; | &gt;
</EM><BR>
<EM>&gt; | &gt; Сергей
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | АнК:
</EM><BR>
<EM>&gt; | Согласен, &quot;конструктность&quot; -- очень хорошая цель для языка!
</EM><BR>
<EM>&gt; | (В скобках заметим: *одна из* целей).
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | С этой точки зрения введение откатов и откатных функций
</EM><BR>
<EM>&gt; | в Рефал повышает его &quot;конструктность&quot;.
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | (Хочу подчеркнуть, что я сейчас говорю только о сравнении
</EM><BR>
<EM>&gt; | разных версий Рефала между собой, а не о Рефалах и SML-ях.
</EM><BR>
<EM>&gt; | Последние слишком различаются по устройству и удовлетворяют
</EM><BR>
<EM>&gt; | слишком разным целям.)
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | Однако, откатность -- это лишь одно из колесиков Рефала Плюс.
</EM><BR>
<EM>&gt; | Если откатность не нравится, надо ставить вопрос всерьез и по крупному:
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; |     Достичь *тех же целей* без откатности!
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | Если кто-то сможет это сделать, это будет прекрасным
</EM><BR>
<EM>&gt; | продолжением эволюции Рефала во &quot;второй стадии&quot;.
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | Но сначала надо сформулировать хотя бы часть целей.
</EM><BR>
<EM>&gt; | Это нетрудно, поскольку Сергей Романенко сделал это сам
</EM><BR>
<EM>&gt; | 10-15 лет тому назад (см. его препринт &quot;Рефал-4...&quot;):
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; |     Сделать выразимым на самом языке те преобразования
</EM><BR>
<EM>&gt; |     (разные оптимизации, прогонку и т.п.),
</EM><BR>
<EM>&gt; |     которые до этого формулировались на других языках:
</EM><BR>
<EM>&gt; |     &quot;языке сборки&quot;, Рефал-графах и т.д.
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | И надо заметить, что эта &quot;сумасбродная&quot; цель была достигнута
</EM><BR>
<EM>&gt; | в Рефале Плюс без разрушения многих других свойств Рефала!
</EM><BR>
<EM>&gt; | &quot;Язык сборки&quot; и Рефал-графы тоже удовлетворяют этой цели,
</EM><BR>
<EM>&gt; | но это (мягко говоря) уж очень другие языки.
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | А для чего это нужно? -- Назову 2 &quot;мелочи&quot; и одну &quot;крупную цель&quot;.
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | &quot;Мелочи&quot;, уже использованные на практике:
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; |   - основные оптимизации делаются (в новой реализации Рефала Плюс --
</EM><BR>
<EM>&gt; |     не так ли? -- обращаюсь к трем А: Абрамову, Андрею и Антону)
</EM><BR>
<EM>&gt; |     в независимом как от входного языка, так и от выходного
</EM><BR>
<EM>&gt; |     отображения виде -- на AS по терминологии Абрамова;
</EM><BR>
<EM>&gt; |     (не говорю уж о том, что их можно разрабатывать, преподавать,
</EM><BR>
<EM>&gt; |     строить теорию -- и все это в человеческом виде).
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; |   - нет проблемы естественного преобразования выхода
</EM><BR>
<EM>&gt; |     суперкомпилятора(Рефал-графов) в Рефал (Плюс):
</EM><BR>
<EM>&gt; |     понятий достаточно, не нужно порождать вспомогательные функции и т.п.;
</EM><BR>
<EM>&gt; |     (это использовалось 2 раза: мной в 90-м году для суперкомпилятора
</EM><BR>
<EM>&gt; |     Турчина 90-го года и в этом году Антоном О. и Юрой К. для Scp4).
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | Крупная цель:
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; |     Ребята, ну, мы ж все время говорим о метасистемном переходе
</EM><BR>
<EM>&gt; |     и метавычислениях -- о том, что тексты на языке должны
</EM><BR>
<EM>&gt; |     стать объектом преобразований! -- и чем легче, проще и
</EM><BR>
<EM>&gt; |     выразимее это будет, тем...
</EM><BR>
<EM>&gt; |
</EM><BR>
<EM>&gt; | Андрей.
</EM><BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0146.html">Andrey Slepuhin: "Some links"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0144.html">Arkady Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0144.html">Arkady Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0147.html">Anton Yu. Orlov: "Re: Evolution of programming languages (Was:  Об отсечениях внутри блока.)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0144.html">Andrei Klimov: "Re: Evolution of programming languages Was: Об отсечениях внутри блока."</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:58 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
