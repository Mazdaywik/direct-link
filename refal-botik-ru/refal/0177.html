<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Sergei M. Abramov (at home) (abram@botik.ru)">
<META NAME="Subject" CONTENT="Re: Обозначения для спецсимволов">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Обозначения для спецсимволов</H1>
<HR>
<P>
<!-- received="Sat Feb 10 16:48:22 2001" -->
<!-- isoreceived="20010210134822" -->
<!-- sent="Sat, 10 Feb 2001 15:57:27 +0300" -->
<!-- isosent="20010210125727" -->
<!-- name="Sergei M. Abramov (at home)" -->
<!-- email="abram@botik.ru" -->
<!-- subject="Re: Обозначения для спецсимволов" -->
<!-- id="00a701c09361$07581de0$32e1d0c3@abrhome.polnet.botik.ru" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="Обозначения для спецсимволов" -->
<STRONG>Subject: </STRONG>Re: Обозначения для спецсимволов<BR>
<STRONG>From: </STRONG>Sergei M. Abramov (at home) (<EM>abram@botik.ru</EM>)<BR>
<STRONG>Date: </STRONG>Sat Feb 10 2001 - 15:57:27 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#177">[ date ]</A>
<A HREF="index.html#177">[ thread ]</A>
<A HREF="subject.html#177">[ subject ]</A>
<A HREF="author.html#177">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0178.html">Andrei Klimov: "Re: Обозначения для спецсимволо"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0176.html">Leonid F. Belous: "Re: Обозначения для спецсимволов"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0178.html">Andrei Klimov: "Re: Обозначения для спецсимволо"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0176.html">Sergei M. Abramov (at home): "Re: Обозначения для спецсимволов"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
День добрый, всем!
<BR>
<P>Хотя вопрос вроде как &quot;по Рефалу-5&quot;, но и не совсем.
<BR>
<P>Посему, позволю себе реплику:
<BR>
<P><EM>&gt;Вопрос состоит в следующем. Есть ли в Рефале-5 способ обозначить
</EM><BR>
<EM>&gt;специальные терминальные символы, а именно - символ табуляции, символ
</EM><BR>
<EM>&gt;возврата каретки, символ BELL и прочие? Есть ли какой-нибудь аналог для
</EM><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*******************************
<BR>
<EM>&gt;\n, \t, \r, \g и прочих обозначений языка C...
</EM><BR>
&nbsp;**********************************************
<BR>
<EM>&gt;Собственно, меня интересует две стороны проблемы. Первая - есть ли такой
</EM><BR>
<EM>&gt;способ в той версии Рефала-5, которая доступна на сайте (именно эту версию
</EM><BR>
<EM>&gt;я пытаюсь использовать).
</EM><BR>
<P><EM>&gt; .... Вторая - каков должен был бы быть такой способ,
</EM><BR>
<EM>&gt;если бы мир был идеальным ;-) (безотносительно того, есть ли такой способ
</EM><BR>
&nbsp;*************************
<BR>
<EM>&gt;на самом деле).
</EM><BR>
<P>Про Рефал-5 не скажу, а в документации по Рефалу Плюс:
<BR>
<P># 3.4.СИМВОЛЫ-ЛИТЕРЫ
<BR>
...
<BR>
#      Символ-литера соответствует одной литере кода ASCII и запи-
<BR>
# сывается в виде изображения этой литеры  ASCII,  заключенного  в
<BR>
# апострофы. Например:     'A' 'a' '7' '$'
<BR>
#      Как правило, изображением литеры ASCII  является  сама  эта
<BR>
# литера, за исключением следующих литер ASCII, для которых  пред-
<BR>
# усмотрены особые обозначения:
<BR>
#
<BR>
#      Новая строка (перевод строки) HL (LF)   '\n'
<BR>
#      Горизонтальная табуляция      HT        '\t'
<BR>
#      Вертикальная табуляция        VT        '\v'
<BR>
#      Возврат на шаг                BS        '\b'
<BR>
#      Возврат каретки               CR        '\r'
<BR>
#      Перевод формата               FF        '\f'
<BR>
#      Обратная косая                \         '\\'
<BR>
#      Апостроф                      '         '\''
<BR>
#      Двойная кавычка               &quot;         '\&quot;'
<BR>
<P>Еще может показаться интересным такое:
<BR>
<P>#     ДОПОЛНИТЕЛЬНЫЕ ВОЗМОЖНОСТИ РЕФАЛА ПЛЮС
<BR>
...
<BR>
#     ЗАПИСЬ ЧИСЕЛ И ЛИТЕР В ШЕСТНАДЦАТИРИЧНОЙ СИСТЕМЕ
<BR>
#
<BR>
#     Неотрицательные целые числа можно записывать в виде
<BR>
#           0xZZZ...ZZ
<BR>
# где ZZZ...ZZ  -  непустая  последовательность
<BR>
# шестнадцатиричных цифр.
<BR>
#     Например, 0xFF и 0xff эквивалентны 255.
<BR>
#     Изображения литер, входящие в изображения цепочек символов-
<BR>
# литер и символов-слов, могут записываться в виде
<BR>
#          \xZZ
<BR>
# где ZZ - две шестнадцатиричные цифры, задающие ASCII-код литеры.
<BR>
<P><EM>&gt; ... Вторая - каков должен был бы быть такой способ,
</EM><BR>
<EM>&gt;если бы мир был идеальным ;-) (безотносительно того, есть ли такой способ
</EM><BR>
<EM>&gt;на самом деле).
</EM><BR>
<P>Ох какой хороший вопрос!  Так вот, была огромная дискуссия как в рефалах (5, 6,
<BR>
Плюс) писать литеры в цепочках литер и литеры в словах (в составных символах).
<BR>
Очень даже поучительная и интересная была дискусия.  Развесистая
<BR>
дискуссия---даже уникод припоминали!.
<BR>
<P>Так вот, из мэйл-архива эта дискуссия кем-то убрана (архиватором по
<BR>
давности?)...  Увы!
<BR>
<P><EM>&gt;Заодно, уж раз собрался написать, хотелось бы задать еще один вопрос
</EM><BR>
<EM>&gt;знатокам Рефала. Насколько я понял, в Рефале-5 отсутствует то, что
</EM><BR>
<EM>&gt;когда-то называлось, если не ошибаюсь, спецификаторами (например, для
</EM><BR>
<EM>&gt;S-переменной можно было указать диапазон символов, которые она может
</EM><BR>
<EM>&gt;match'ить).
</EM><BR>
<P>Да, не только для S, но и для T и E, не только диапазон, но и другие
<BR>
спецификации.
<BR>
<P>Да, в Рефале-2 был хороший большой язык описания спецификаторов на _термы_.  Все
<BR>
было сделано (примерно) вот так:
<BR>
<P>=1= были элементарные спецификаторы на термы (вида: конечное множество символов,
<BR>
выраж. в скобках, число, указатель, &quot;произвольный терм&quot; и т.п.);
<BR>
<P>=2= и были выражения, позволяющие из уже построенных спецификаторов строить
<BR>
новые спецификаторы (ну, вроде как: объединение / пересечение / разность
<BR>
спецификаторов есть спецификатор).  В точности деталей не опомню, но идея ясна.
<BR>
<P><EM>&gt;Исчезновение спецификаторов лично мне понравилось (на мой
</EM><BR>
<EM>&gt;взгляд, язык стал стройнее), и некоторые догадки о причине такого
</EM><BR>
<EM>&gt;исчезновения у меня есть.
</EM><BR>
<P>Да, конечно, Ваша догадка правильная ;-)
<BR>
<P>Основная причина вымирания понятия: в новых рефалах (с большим или меньшим
<BR>
удобством) строе понятие спецификатора можно выразить средствами языка.
<BR>
<P>Например, если на рефале написана функция &lt;Is-Identifier e.X&gt;, которая
<BR>
проверяет, что еX есть непустая цепочка литер (начинающаяся с буквы и содержащее
<BR>
букву и/или цифру) и которая возвращает True или False, то можно написать
<BR>
цепочку перестроек:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;... е1 : е2 еId e3, &lt;Is-Identifier eId&gt; : True, ...и далее...
<BR>
<P>Если интересно, в Рефале Плюс эти средства еще более развиты:
<BR>
<P>****************************************************
<BR>
=1= введены &quot;предикатные функции&quot; (откатные функции)
<BR>
****************************************************
<BR>
<P>То есть введена возможность вернуть из функции не только обычный результат, но и
<BR>
результат $fail, где $fail -- ровно тот результат, с которым завершается,
<BR>
например, такая перестройка (клэш):
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;А : В
<BR>
<P>теперь в Рефале Плюс мы можем писать функции:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;-- которые проверяют некий спецификатор (возвращают пусто или $fail);
<BR>
<P>или так (для парсеров всяких удобно)
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;-- которые &quot;отъедают&quot; от строки некую конструкцию (если удается) или говорят
<BR>
о неудаче $fail.
<BR>
<P>Общепринято имена таких функций завершать знаком &quot;?&quot;.
<BR>
<P>Вышеприведенный пример:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;... е1 : е2 еId e3, &lt;Is-Identifier? eId&gt;, ...и далее...
<BR>
<P>Или такой пример &quot;цепочки перестроек&quot; (клэшей):
<BR>
<P>&nbsp;&nbsp;&nbsp;...
<BR>
&nbsp;&nbsp;&nbsp;&lt;SkipBlanks e0&gt;  :: e1,
<BR>
&nbsp;&nbsp;&nbsp;&lt;Identifier? e1&gt; :: (eId1) e2, /* удалось отгрысть имя1 */
<BR>
&nbsp;&nbsp;&nbsp;&lt;SkipBlanks e3&gt;  :: e4,
<BR>
&nbsp;&nbsp;&nbsp;e4 : '+' e5,
<BR>
&nbsp;&nbsp;&nbsp;&lt;SkipBlanks e5&gt;  :: e6,
<BR>
&nbsp;&nbsp;&nbsp;&lt;Identifier? e6&gt; :: (eId2) e7 /* удалось отгрысть имя2 */
<BR>
&nbsp;&nbsp;&nbsp;= (Sum (Name e.Id1) (Name e.Id2)) &lt;Parser e7&gt; ;
<BR>
<P>****************************************************
<BR>
=2= Есть библиотечные &quot;предикатные&quot; функции для
<BR>
элементарных спецификаторов (классов) символов:
<BR>
****************************************************
<BR>
<P># 6.CLASS: ПРЕДИКАТЫ ДЛЯ РАСПОЗНАВАНИЯ КЛАССОВ СИМВОЛОВ
<BR>
#
<BR>
# $func? BOX?     e.Exp = ;
<BR>
# $func? CHANNEL? e.Exp = ;
<BR>
# $func? CHAR?    e.Exp = ;
<BR>
# $func? DIGIT?   e.Exp = ;
<BR>
# $func? FUNC?    e.Exp = ;
<BR>
# $func? INT?     e.Exp = ;
<BR>
# $func? LETTER?  e.Exp = ;
<BR>
# $func? STRING?  e.Exp = ;
<BR>
# $func? TABLE?   e.Exp = ;
<BR>
# $func? VECTOR?  e.Exp = ;
<BR>
# $func? WORD?    e.Exp = ;
<BR>
#
<BR>
#   Эти функции служат для проверки, что e.Exp является  симво-
<BR>
# лом, принадлежащим к определенному множеству символов.
<BR>
...
<BR>
<P>То есть, мы уже имеем в языке &quot;элементарные спецификаторы&quot;.  В добавок к этому,
<BR>
в Рефале Плюс сделано вот что:
<BR>
<P>****************************************************
<BR>
=3= В языке введена &quot;полная&quot; система для
<BR>
комбинирования &quot;спецификаторов&quot;.
<BR>
****************************************************
<BR>
<P>Ясно, что если Вы имеете:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...спецификатор-1...  (например: s1 : 'A')
<BR>
и
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...спецификатор-2...   (например: s1 : 'B')
<BR>
<P>то Вы можете захотеть записать &quot;И&quot;, &quot;ИЛИ&quot; и &quot;НЕ&quot; над спецификаторами.  В Рефале
<BR>
Плюс это легко сделать.
<BR>
<P>А именно:
<BR>
<P>*****************
<BR>
&quot;И&quot; == пересечене
<BR>
*****************
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Это просто &quot;запятая&quot;:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...спецификатор-1...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...спецификатор-2...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>Например:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1 : 'A',
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1 : 'В',
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>********************
<BR>
&quot;ИЛИ&quot; == объединение
<BR>
********************
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Это две ветки (кажется в Рефале-5 так нельзя--надо завести вспомог.функцию.
<BR>
Зато в Рефале-6 и Плюс--так можно):
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\{    ...спецификатор-1...;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...спецификатор-2...;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\},
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>Например:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\{  s1 : 'A';
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1 : 'В';
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\},
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>********************
<BR>
&quot;НЕ&quot; == дополнение
<BR>
********************
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Это явная конструкция (#) отрицания &quot;предиката&quot; в Рефале-Плюс:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ...спецификатор-1...,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>Например:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;...ранее...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&lt;LETTER? s1&gt;,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P>или
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;...ранее...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# \{ s1 : 'A', ;\}
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...далее...
<BR>
<P><EM>&gt;Тем не менее, не мог бы кто-нибудь из знатоков
</EM><BR>
<EM>&gt;поделиться своим мнением на этот счет...
</EM><BR>
<P>Выше вот такое мое мнение: старые спецификаторы ушли со сцены &gt;&gt;&gt;в том числе&lt;&lt;&lt;
<BR>
потому, что современные диалекты Рефала позволяют легко писать &quot;спецификаторы&quot;
<BR>
на самом Рефале и пользовать их в &quot;левых частях&quot; свободно и даже слишком
<BR>
свободно.
<BR>
<P>Удачи
<BR>
<P>Сергей
<BR>
П.С.
<BR>
<P>=1= Про эффективность &quot;новых спецификаторов&quot; по сравнению со старыми не говорил.
<BR>
<P>=2= Старые спецификаторы ушли со сцены...  Не пора ли им вернуться?  (Это так...
<BR>
просто вопрос...)
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0178.html">Andrei Klimov: "Re: Обозначения для спецсимволо"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0176.html">Leonid F. Belous: "Re: Обозначения для спецсимволов"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0178.html">Andrei Klimov: "Re: Обозначения для спецсимволо"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0176.html">Sergei M. Abramov (at home): "Re: Обозначения для спецсимволов"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:58 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
