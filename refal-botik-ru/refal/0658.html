<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="A.A.Vladimirov (vladimi@mech.math.msu.su)">
<META NAME="Subject" CONTENT="Re: Re[2]: RAFAL &amp; JAVA">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Re[2]: RAFAL &amp; JAVA</H1>
<HR>
<P>
<!-- received="Wed Jan 19 19:00:31 2005" -->
<!-- isoreceived="20050119160031" -->
<!-- sent="Wed, 19 Jan 2005 18:34:50 +0300" -->
<!-- isosent="20050119153450" -->
<!-- name="A.A.Vladimirov" -->
<!-- email="vladimi@mech.math.msu.su" -->
<!-- subject="Re: Re[2]: RAFAL &amp; JAVA" -->
<!-- id="1106148890.5319.46.camel@shkal" -->
<!-- charset="utf-8" -->
<!-- inreplyto="003901c4fe33$1cd31800$914c7cc1@copernik" -->
<STRONG>Subject: </STRONG>Re: Re[2]: RAFAL & JAVA<BR>
<STRONG>From: </STRONG>A.A.Vladimirov (<EM>vladimi@mech.math.msu.su</EM>)<BR>
<STRONG>Date: </STRONG>Wed Jan 19 2005 - 18:34:50 MSK
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#658">[ date ]</A>
<A HREF="index.html#658">[ thread ]</A>
<A HREF="subject.html#658">[ subject ]</A>
<A HREF="author.html#658">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0659.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0657.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0657.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0660.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Next in thread:</STRONG> <A HREF="0659.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Next in thread:</STRONG> <A HREF="0643.html">Sergei Romanenko: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0657.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0660.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
В Срд, 19/01/2005 в 16:26 +0200, Leonid Belous пишет:
<BR>
<EM>&gt; Добрый вечер, всем!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Антон, хочу заранее извиниться за возможную свою неумелость, но ...
</EM><BR>
<EM>&gt; провести предлагавшиеся эксперименты с Вашим хозяйством как с &quot;черным ящиком&quot; мне не удалось.
</EM><BR>
<EM>&gt; Напрямую (так, чтобы у Вас чего-нибудь не менять) у меня не собирается не только под FreeBSD,
</EM><BR>
<EM>&gt;но и под тремя вариантами Linux (ASP, ALT, Mandrake, Debian).
</EM><BR>
<EM>&gt; С грехом пополам (убрав в makefile параметр, вызываший ругань -mtune=pentium3 )
</EM><BR>
<P>Извиняюсь: данный параметр для компиляции не принципиален (и, возможно,
<BR>
поддерживается не всеми gcc).
<BR>
<P><EM>&gt;  удалось собрать под одним из Linux, но запустить zamena.ref в режиме скрипта не удается
</EM><BR>
<EM>&gt;  (ругань типа bad interpreter).
</EM><BR>
<P>Если интерпретатор действительно лежит по указанному после #! пути, это
<BR>
довольно странно. Проверю.
<BR>
<P>Кстати, забыл написать, что makefile предполагает запуск make из-под
<BR>
root'а (нужны права на запись в некоторые системные каталоги). Равно как
<BR>
забыл написать, что внутри файла Bibliotekoj лежит ещё один makefile
<BR>
(для библиотек функций), предполагающий самостоятельный запуск.
<BR>
<P>Так что бейте меня, а равно топчите меня ногами. (C) И.Ильф и Е.Петров
<BR>
<P><EM>&gt;  Казалось бы, должен был проработать из командной
</EM><BR>
<EM>&gt;  строки эквивалентный запуск (с удалением первых трех строк в zamena.ref)
</EM><BR>
<EM>&gt; &gt;refal zamena.ref
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Но в этом случае выдается сообщение: Eraro: apliko je sendeterminita funkcio.
</EM><BR>
<P>Чему я на сей раз не удивлён: вторая и третья строки относятся не к
<BR>
shell, а к Рефалу (подключают библиотеки функций ввода-вывода и
<BR>
интерактивного режима). Если их убрать, программа действительно не
<BR>
сможет заработать по причине неопределённости ряда функций.
<BR>
<P><EM>&gt; Пробовал давать &gt;refal test , где файл состоит из одной строчки из 4-х единиц, 
</EM><BR>
<EM>&gt; получил сообщение: Dosiero z.ref, linio 1: malbona determino de objekto.
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>Перевод:
<BR>
Файл z.ref, строка 1: неверное определение объекта
<BR>
<P>Полагаю, здесь всё дело в том, что Ваш файл не есть рефал-программа :)
<BR>
<P>Кстати: у меня (Fedora Core 3, локаль ru_UTF-8) все сообщения об ошибках
<BR>
выдаются на русском языке (ибо одна из строк makefile'а генерирует файл
<BR>
с русским переводом оных). Попробую проверить, что будет под другими
<BR>
русскими локалями (и дистрибутивами).
<BR>
<P><EM>&gt; Антон, наверное бы я разобрался и подправил кое-где, кое-что в Вашем &quot;черном ящике&quot;
</EM><BR>
<P><EM>&gt;  или в настройках Linux, но я быстро прекратил эти попытки по следующей причине.
</EM><BR>
<P><EM>&gt;  Нникак не умаляя возможной оригинальности Вашей разработки
</EM><BR>
<EM>&gt;  (содержащей сотни строк на С), хочу остановиться на одном негативном моменте.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Комментарии написаны на языке, как я понимаю, типа Esperanto.
</EM><BR>
<P>Точнее, на ЛОМАНОМ эсперанто. Поскольку на первом этапе разработки я не
<BR>
был уверен, буду ли опубликовывать результат, решил попрактиковаться :(
<BR>
<P>Комментарии, конечно, надо будет перевести на что-то более читабельное.
<BR>
<P><P><EM>&gt; Вопрос по сути:
</EM><BR>
<EM>&gt; Зачем Вам интерпретатор языка Рефал, а не интерпретатор,
</EM><BR>
<EM>&gt;  написанный на языке Рефал для Вашей конкретного класса  задач? 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Как мне показалось, Вам пока нужно было в диалоге воспринимать текст
</EM><BR>
<EM>&gt;  с учетом кодировки Юникод, а потом с ним что-то делать? Зачем в диалоге
</EM><BR>
<EM>&gt;  вводить и обрабатывать предложения на языке Рефал?
</EM><BR>
<EM>&gt; У меня когда-то стоял подобный вопрос, когда Рефал применялся при
</EM><BR>
<EM>&gt;  создании системы компьютерной алгебры &quot;Сириус&quot;. 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Вспоминая нашу с Вами переписку, относительно нехватки встроенных функций
</EM><BR>
<EM>&gt;  в Рефале для обработки текста в кодировке Utf-8, задаю вопрос - Вам не
</EM><BR>
<EM>&gt;  хватает встроенных функций в Рефале и неустраивают компилирующие реализации Рефала,
</EM><BR>
<EM>&gt;  поэтому Вы решились написать свой интерпретатор с языка Рефал?
</EM><BR>
<EM>&gt; Скорее всего я Вас неправильно понимаю, посему прошу разъяснений.
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>Да нет, скорее всего, это я недостаточно подробно описал, что меня не
<BR>
устраивает в том же Рефале-5.
<BR>
<P>Во-первых: язык преподносится как бестиповый, на деле __не являясь
<BR>
таковым__. Ибо макроцифры, буквы и составные символы - это, в сущности,
<BR>
три разных типа данных. При этом объём этих типов конечен. Поэтому,
<BR>
например, чтобы &quot;подружить&quot; юникод с Рефалом-5, нужно или вводить
<BR>
__новый тип данных__, или заниматься трюкачеством. При использовании
<BR>
длинной арифметики тоже нужно помнить, что натуральное число - это не
<BR>
символ, а целое выражение - и помнить, когда оное нужно брать в скобки,
<BR>
а когда - нет (впрочем, насколько я помню, из Рефала-плюс макроцифры уже
<BR>
убрали).
<BR>
<P>Во-вторых: насколько я смог понять, реализация Рефала-5 сделана таким
<BR>
образом, что все встроенные функции (понимая так функции, написанные не
<BR>
на Рефале, а на C) должны быть &quot;вбиты&quot; в ядро, и физически не могут быть
<BR>
вынесены в библиотеки, которые можно было бы подключать (или не
<BR>
подключать) независимо от ядра. Что тоже, на мой взгляд, не есть самое
<BR>
разумное решение.
<BR>
<P>Поэтому я и попробовал написать реализацию, которая бы:
<BR>
<P>1) имела ровно один тип символов (натуральные числа, величина которых
<BR>
ограничена лишь размером оперативной памяти), к которому сводились бы
<BR>
все остальные. Именно таким подходом, например, обусловлено появление
<BR>
числа 10 в файле zamena.ref (это - код символа перевода строки).
<BR>
<P>2) содержала бы в ядре минимальное число функций, вынося всё прочее в
<BR>
библиотеки, писать которые можно было бы на основе максимально простых
<BR>
стандартных приёмов.
<BR>
<P>Поскольку технологию написания компиляторов Рефала я, мягко говоря, не
<BR>
очень представляю, то реализация получилась интерпретирующей (и довольно
<BR>
топорной, хотя, по результатам моих тестов, скорость работы не сильно
<BR>
отстаёт от Рефала-5). Возможность замены машины по ходу её работы
<BR>
оказалась при этом __следствием__ характера реализации, а не собственно
<BR>
целью.
<BR>
<P><P>С уважением,
<BR>
Антон Владимиров
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0659.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0657.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0657.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0660.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Next in thread:</STRONG> <A HREF="0659.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Next in thread:</STRONG> <A HREF="0643.html">Sergei Romanenko: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0657.html">A.A.Vladimirov: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0660.html">Leonid Belous: "Re: Re[2]: RAFAL &amp; JAVA"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Wed Jan 19 2005 - 19:01:08 MSK</EM>
</EM>
</SMALL>
</BODY>
</HTML>
