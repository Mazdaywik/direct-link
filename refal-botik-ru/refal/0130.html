<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Sergei M. Abramov (abram@botik.ru)">
<META NAME="Subject" CONTENT="Re: another subtraction result">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: another subtraction result</H1>
<HR>
<P>
<!-- received="Sat Oct  7 15:11:17 2000" -->
<!-- isoreceived="20001007111117" -->
<!-- sent="Wed, 4 Oct 2000 11:33:30 +0300" -->
<!-- isosent="20001004083330" -->
<!-- name="Sergei M. Abramov" -->
<!-- email="abram@botik.ru" -->
<!-- subject="Re: another subtraction result" -->
<!-- id="013101c02ddd$c63eca40$07aee8c1@rcms.botik.ru" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="another subtraction result" -->
<STRONG>Subject: </STRONG>Re: another subtraction result<BR>
<STRONG>From: </STRONG>Sergei M. Abramov (<EM>abram@botik.ru</EM>)<BR>
<STRONG>Date: </STRONG>Wed Oct 04 2000 - 12:33:30 MSD
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#130">[ date ]</A>
<A HREF="index.html#130">[ thread ]</A>
<A HREF="subject.html#130">[ subject ]</A>
<A HREF="author.html#130">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0131.html">Sergei M. Abramov (at home): "References"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0129.html">Alexander P. Konyshev: "News"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
День добрый, всем!
<BR>
<P>Антон, я подумал, что после того, как удалось получить при помощи Scp4
<BR>
вполне приличную функцию вычитания можно переписку вывести из подполья и
<BR>
данное письмо показать общественности.
<BR>
<P>В цитаты старой переписки я добавил немного /** разъяснений **/
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-----Original Message-----
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;From: Antonio &lt;antonio0@mail.ru&gt;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;To: Sergei M. Abramov &lt;abram@botik.ru&gt;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Date: 3 октября 2000 г. 19:51
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Subject: Re: another subtraction result
<BR>
<P><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Доброго Вечера!
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Как я понял (проанализировав Рефал Плюс /** в него выведен результат
<BR>
Scp4 за счет альтернативного бэкэнда--спасибо, я смог читать **/),
<BR>
инвертировался общий случай:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scp &lt;ura add (eX (XЕ 1)) eY&gt;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Как результат, получен код  программы: substr eX eY
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Код довольно странный (неисповедимы пути scp4), но правильный:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substr eX eY --&gt; цикл F1 --&gt; цикл F2
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Цикл F1 пробегается по eY (отбрасывает 1) до и накапливает равный eZ
<BR>
(добавляя-навешивая 1, на ХЕ 1).
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Цикл F2 отнимает 1 от еХ и eZ.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Кажется я ничего не перепутал?
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Да все правильно. И кажется ясно откуда взялись эти два цикла --- из
<BR>
Ccond и Clash соответственно. Именно ветвления из этих функций остались в
<BR>
residual-е. Мы с АНдреем как-раз это обсуждаем, но возможно, что такое нынче
<BR>
суперкомпиляция (как теория вообще) не ест.
<BR>
Спасибо АНдрею за исправление в Scp4 ошибок, которые выявила работа над &quot;scp
<BR>
&lt;ura ...&gt;&quot;
<BR>
<P>Да, АНдрей абсолютно прав--так и должно остаться при нынешнем
<BR>
технологическом уровне Scp -- два неслитых цикла.
<BR>
<P>Объединить эти два неслитых цикла способна только следущая технология
<BR>
(ScpWalk).  (Андрей К!  Вот оно!)
<BR>
<P>Тем самым достигнуто предельное (для нынешней Scp-технологии) качество
<BR>
автоматически построенного вычитания.
<BR>
<P>Кроме того, ясно, какие задачи на инверсию дадут более чистый результат: те
<BR>
задачи, в которых не будет цикла в Clash.  Например, это тот случай, когда
<BR>
мы инвертируем программы, результатом которых является атом.
<BR>
Например--инвертируем предикаты.
<BR>
<P>Таких TSG-программ мы с Робертом уже сколько-то накопили: проверка того, что
<BR>
строка есть путь в графе, и т.п.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/** автоматически полученное вычитание **/ Можно погонять под Р+ с
<BR>
трассировкой и полюбоваться.  При этом хорошо входные данные
<BR>
&quot;раскрасить&quot;--использовать вместо (&quot;АТОМ&quot; (1)), другие атомы в /**
<BR>
аргументах**/ Х и Y:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(CONS 'x (CONS 'x (CONS 'x (CONS 'x 'xnil))))   (CONS 'y (CONS
<BR>
'y (CONS 'y 'ynil)))
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Ну я пока не поставил Р+, руки не доходят. Но я скажу Антону и Юре.
<BR>
<P>Да, спасибо.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Он получается если просуперкомпилировать результат
<BR>
суперкомпиляции.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Это принесло некоторый результат (тот что я прислал Вам последний), но
<BR>
сейчас я от этого отказался, так как хватает первого прохода (произошло
<BR>
улучшение /** Scp4 **/) , а второй проход теперь сосем не помогает.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;И еще для Scp4 обычно из-за раскрытия снизу (или сверху -- непомню) это
<BR>
не то что непомогает, а он начинает по одному проходу цикла отделять.
<BR>
<P>Видимо тут про &quot;перестройку снизу&quot; и &quot;перестройку сверху&quot; -- куда
<BR>
подклеивать обобщающую конфигурацию после обобщения.
<BR>
<P>На школе мы это обсуждали: делать перестройку надо снизу (а не так как это
<BR>
сделал М.С.Горбачев), но при этом использовать hyper-cycle  в
<BR>
суперкомпиляции.  Тогда и переобобщений не будет и отмотки лишних витков не
<BR>
будет.
<BR>
<P>Все это описано в <A HREF="../../AbrGlu/index.html">http://www.botik.ru/AbrGlu/</A> mc_and_appls.zip --&gt; scp.gs
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;a.. функция scp2 --&gt; next_pass -- гиперцикл;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;a.. функция procWh --&gt; else ( (CALLC &quot;Dn&quot; kDn cDn i1 (mkParms cGen
<BR>
sGenDn) [grGen]), i', bs3) -- перестройка снизу.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Да, и после такой чистки, хотелось бы переписать результат на TSG.
<BR>
Тогда его можно показать Роберту... ;-)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...и возвращаться к УРА.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;А что Роберт не понимает Рефал(5 или +)?
<BR>
<P>Роберт то может и поймет, а вот большая (но не лучшая) часть прогрессивного
<BR>
человечества Рефал не читает...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Попробуем -- обязательно ли, чтобы он запускался? Или можно без
<BR>
подробностей?
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;А много ли пришлось совершить надругательств над Ура, чтобы на нем
<BR>
scp4 не ложился?
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Какие это были упрощения (по смыслу, если можно текстовое, а не
<BR>
рефальское
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;описание)...
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Сначала, когда я писал первое письмо, УРА было искалечено до неузнавания
<BR>
:) Ура было немного подправлено, но также было убрано около 70% программы --
<BR>
все рестрикции, подстановки, и др , то что не нужно было для унарного
<BR>
сложения. Однако потом, я конечно стал все восстанавливать, и осталось всего
<BR>
два-три места. Правда теперь я обхожусь без повторной суперкомпиляции, и не
<BR>
могу повторить присланный вам хит :), а остается программа чуть-чуть
<BR>
большее. Но это не принципиально -- в ней те же два цикла. Итак изменения:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Первое, и самое главное -- это закомментирован вариант выбора в функции
<BR>
CCond который в случае проверки CONS? и второго параметра ввиде (XE что-то)
<BR>
запускает SplitE, который делает разбиение и создает новые СЕ-переменные.
<BR>
Хотя в данном случае для унарного сложения он даже по этой ветке не идет.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Два вывода:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.. суперкомпилятор не любит ветку где делаются новые фреш
<BR>
С-переменные(и изменяется свободный индекс), надо  пробовать с ней что-то
<BR>
делать.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.. суперкомпилятор пока не может откинуть все лишние ветки, это и
<BR>
есть главная проблема во
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Втором, что закомментироваваны ветки (одна в том же месте) другие в
<BR>
Clash1 связанные с проверкой на (XA что-то).
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Хотя честно можно сказать, что это, в отличие, от первого менее страшно,
<BR>
так как если их оставить, то всего лишь добавятся в этих функциях, глупые
<BR>
проверки на XA, а логика не изменится. Сейчас я пытаюсь их убрать фильтрами,
<BR>
но пока ему очень не нравится эти фильтры, но это как-раз в состоянии
<BR>
обсуждения с АНдреем.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Третье, пока я не понял, важно ли это или вообще фигня, но некоторые
<BR>
(иногда, поэтому и сомнения) проблемы с функциями поиска конкретной
<BR>
переменной в среде (в Apply_Cexp_CCsub) и поиска есть ли у нас такое же
<BR>
решенное уравнение  в функции MoveCL (если есть надо проверить
<BR>
непротиворечивость). Но скорее --- это трудности технического характера, мне
<BR>
кажется (и почти получается) их переписать более просто(и менее общо, но
<BR>
работать должно для любых программ).
<BR>
<P>Спасибо за разъяснения--все стало ясным.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Огромное спасибо за усилия и письма,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;И прошу прощения, что отвечаю не на все и с дикой задержкой--очень
<BR>
тяжелое время (конец квартала, отчеты в Союз Бел. и России, дидлайн с
<BR>
Робертом)....
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Ага понимаю, просто хотелось понять не потерялся ли столь ценный
<BR>
результат во всемирной паутине (всяко бывает).
<BR>
<P>Нет, не потерялся ;-)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;А также уже необходима ваша моральная поддержка для продолжения и
<BR>
получения более сильных результатов.
<BR>
<P>Всегда имеете!
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;А также: я так понимаю, что Вы с Робертом пишете статью по УРА, не могли
<BR>
бы Вы ее прислать.
<BR>
<P>Здесь все пошло по накатанному пути:
<BR>
<P>Сначала мы написали статью на конференцию:
<BR>
<A HREF="../../AbrGlu/URA/MPC2000/index.html">http://www.botik.ru/AbrGlu/URA/MPC2000/</A> -- статья доступна как DVI и PS, 25
<BR>
страниц.  Ее приняли, хотя конкурсь был не слабый (это не бахвальство
<BR>
качеством статьи, а оценка интереса мировой общественности к теме, к
<BR>
направлению исследований).  Была конференция, доклад куча вопросов.  Но, как
<BR>
видно, это была кратенькая статья--25 страничек только.  Сюда не вошло куча
<BR>
материалов и доказательства (ограничение на длину).  Но когда мы ее делали,
<BR>
мы сразу копили материал на большую (журнальную) статью.  Хотябы материал в
<BR>
невылизанном виде (сырье).
<BR>
<P>Сейчас мы пишем (дидлайн был 30/09/2000 но его расширили и мы как раз сейчас
<BR>
трудимся...) другую заказную статью--URA как подарок Нилу Джонсу к юбилею
<BR>
(пока показывать еще не чего.  Кодовое название URA-FEST. Как только--так
<BR>
сразу Вас познакомлю с текстом)...  Это будет &quot;обучающая&quot; статья.  Менее
<BR>
сухая, чем URA'MPC'2000 -- больше интуиции, больше примеров, но опять не
<BR>
полная статья (всего страниц 25-30), расчитаная на заинтересованного,
<BR>
желающего познакомиться но не страдающего от отсутствия формальных
<BR>
доказательств и т.п. (формализм подменен интуицией).  Таков жанр данной
<BR>
публикации.
<BR>
<P>Кроме того, как обычно после конференции MPC'2000 организаторы отобрали из
<BR>
всех докладов несколько хитов--и наш доклад в том числе (опять: это оценка
<BR>
интереса к направлению) -- см. приложение.  Тем самым, сразу после URA-FEST
<BR>
мы переключимся на написание URA-Journal.  Вот это будет полная версия
<BR>
URA-статья.  Какой-то материал уже накоплен (URA'MPC'2000 + загашник с
<BR>
доказательствами), однако ну хоть сюда (если не в URA-FEST) хотелось бы
<BR>
вставить отчет о первых результатах инверсной компиляции (Вот почему я
<BR>
говорю: надо перевести вычитание на TSG ;-).
<BR>
<P>Что можно предложить:  Вы добиваетесь инверсной TSG--&gt;TSG компиляции чего-то
<BR>
(обсудим еще)--1..2 TSG-программ.  Цель: добиться, чтобы рисунок и
<BR>
нижеследущие слова были бы правдой (не были бы сильной ложью):
<BR>
<P>----------------------------------------------------------------------------
<BR>
<PRE>
----
Рисунок:
        сверху исходная TSG-программа
        ниже запрос на суперкомпиляцию
        внизу результирующая TSG-программа
<P>Слова в основном тексте:
<P>Сегодня получены первые примеры инверсии программы за счет специализации
программы URA (см. Рис. ???).
Этот результат был получен следущим образом:
<P>    -1- Aлгоритм URA (ранее обсужденный в секции ??? и на рис. ???) был
переписан &quot;один-водин&quot; на язык Refal-5\cite{...};
<P>    -2- Для специализации использовался суперкомпилятор Scp-4\cite{...}.
Специализация выполнялась в абсолютно автоматическом режиме.  Результатом
специализации являлась Рефал-5 программа, которая затем была переписана
(вручную? специально созданным простеньким бэкэндом к Scp-4/Р+?)
&quot;один-в-один&quot; в TSG-программу.
<P>Отметим, что ....далее дискуссия о полученном качестве инверсной компиляции,
структуре и характеристиках результирующей программы, наметки на дальнейшие
улучшения--в том числе и за счет развития Scp-технологии, замеры
коэфициентов ускорения в Хаскелле и т.п.....
<P>Слова в Благодарностях:
<P>Авторы благодарны .... за реализацию первого эксперимента по инверсии
программы за счет специализации URA, АНдрею, В.Ф.Турчину--за систему Scp-4 и
техническую поддержку в этой части экспериментов.
<P>----------------------------------------------------------------------------
----
<P>Короче: небольшая под-секция в секции про эксперименты в URA-Journal,
застолбление приоритета &quot;инверсия программ засчет специализации URA&quot;,
благодарности всем участникам.
<P>Но для этого--не должны быть сильной ложью красивый рисунок и слова,
изложенные выше.
<P>Сергей
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0131.html">Sergei M. Abramov (at home): "References"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0129.html">Alexander P. Konyshev: "News"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:58 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
