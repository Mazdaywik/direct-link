<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>refal@botik.ru -- Discussing the Refal programming language, Re</TITLE>
<META NAME="Author" CONTENT="Arkady Klimov (arkady.klimov@supercompilers.com)">
<META NAME="Subject" CONTENT="Re: Refal-J: first release">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Refal-J: first release</H1>
<HR>
<P>
<!-- received="Fri Apr 25 22:43:39 2003" -->
<!-- isoreceived="20030425184339" -->
<!-- sent="Fri, 25 Apr 2003 21:59:23 +0300" -->
<!-- isosent="20030425185923" -->
<!-- name="Arkady Klimov" -->
<!-- email="arkady.klimov@supercompilers.com" -->
<!-- subject="Re: Refal-J: first release" -->
<!-- id="004001c30b5d$754a3f10$8704000a@Bagirra" -->
<!-- charset="koi8-r" -->
<!-- inreplyto="006101c30b38$db3d2f00$013b7cc1@ilt.kharkov.ua" -->
<STRONG>Subject: </STRONG>Re: Refal-J: first release<BR>
<STRONG>From: </STRONG>Arkady Klimov (<EM>arkady.klimov@supercompilers.com</EM>)<BR>
<STRONG>Date: </STRONG>Fri Apr 25 2003 - 22:59:23 MSD
<P>
<UL>
<LI><STRONG>sorted by:</STRONG> 
<A HREF="date.html#308">[ date ]</A>
<A HREF="index.html#308">[ thread ]</A>
<A HREF="subject.html#308">[ subject ]</A>
<A HREF="author.html#308">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0309.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0307.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0307.html">Leonid Belous: "Re: Refal-J: first release"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0309.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0307.html">Arkady Klimov: "Re: Refal-J: first release"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Всем привет и прошу извинить за затянувшуюся дискуссию.
<BR>
Надеюсь, что-то полезное для себя извлекают и &quot;сторонние наблюдатели&quot;.
<BR>
<P>Леня, у меня ощущение, что мы плохо понимаем друг друга и говорим
<BR>
о разном.
<BR>
<P>----- Original Message -----
<BR>
From: &quot;Leonid Belous&quot; &lt;belous@ilt.kharkov.ua&gt;
<BR>
To: &lt;refal@botik.ru&gt;
<BR>
Sent: Friday, April 25, 2003 17:39
<BR>
Subject: Re: Refal-J: first release
<BR>
<P><P>| Привет, всем!
<BR>
|
<BR>
|
<BR>
| &gt; Леня,
<BR>
| &gt; у меня остались еще вопросы насчет Рефал-PHP, спрашиваю через группу,
<BR>
| &gt; так как может это еще и другим интересно. См. ниже.
<BR>
| [...]
<BR>
<P>Выше в [...] я писал, что
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;А еще может мы имеем в виду разные уровни интеграции. Вот например,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;такой вопрос: может ли рефал передать PHP свое произвольное выражение
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;с тем, чтобы оно было на PHP полностью понято, переработано и, быть может,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;передано обратно? Мне почему-то казалось, что нет, то есть что обмен идет
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;только на уровне строк&quot;, но буду рад ошибиться.
<BR>
<P>После прочтения данного письма мне продолжает так казаться.
<BR>
Говоря &quot;на уровне строк&quot; я имел в виду, что рефал передает в PHP
<BR>
(в интерфейсную функцию Php) строку (цепочку символов-литер) и получает
<BR>
назад тоже строку. А PHP извлекает из этой строки то, что может
<BR>
(в частности, требуя, чтобы строка была правильной в смысле
<BR>
синтаксиса PHP) и формирует выходную строку через &quot;стандартный вывод&quot;.
<BR>
Но рефальское выражение со скобками нечего и пытаться передать -
<BR>
ошибка должна быть распознана еще до парсинга PHP. Ты тоже пишешь,
<BR>
что &quot;могу передать твое выражение (A (B '*' 1) (()))  статически (в виде строки
<BR>
символов)&quot;, видимо, имея в виду, что скобки (или все вместе) надо взять в кавычки,
<BR>
чтобы это были литеры, а не рефальские структурные скобки. Я, собственно,
<BR>
так и думал. Пойми меня правильно, я этим не хочу умалить ценность твоей
<BR>
работы, она совершенно адекватна поставленной задаче, и действительно
<BR>
знаменует собой значительный прорыв в деле вывода рефала на
<BR>
&quot;интернет-орбиту&quot;. При этом еще важнее понимать правильно, чтО именно
<BR>
и как решено и какие возможности предоставлены.
<BR>
<P>Леня, я все же должен сделать обещанное на своей странице Рефал-Java,
<BR>
для чего мне нужна от тебя ссылка на соответствующий интернет-ресурс.
<BR>
Можно ли использовать приведенную тобой ниже ссылку на документацию
<BR>
<A HREF="http://www.refal.net/~belous/rphprdoc.htm?">http://www.refal.net/~belous/rphprdoc.htm?</A>
<BR>
Кстати, прекрасное руководство! И краткое введение в рефал тоже
<BR>
замечательное.
<BR>
Только одно замечание - почему-то прыгает шрифт (похоже,
<BR>
с Arial на Times и обратно), причем довольно хаотично.
<BR>
Возможно, твой шрифт-по-умолчанию делает этот дефект незаметным.
<BR>
<P>Аркадий.
<BR>
<P>| &gt; | Именно так, ошибаешься. Обмен возможен в обоих направлениях. Но здесь я
<BR>
| не
<BR>
| &gt; | могу (пока) состязаться в уровне интеграции с тем, что делается у тебя,
<BR>
| в
<BR>
| &gt; | смысле эффективности реализации. Однако эта задача и не стояла у меня на
<BR>
| &gt; | первом месте.
<BR>
| &gt; Дело не в состязании: все-таки делались разные вещи. Но хотелось бы лучше
<BR>
| &gt; понимать особенности каждой. Я хотел бы уточнить свое понимание
<BR>
| &gt; системы Рефал-PHP (мне же надо будет ее упомянуть, сказав в двух
<BR>
| &gt; словах об отличиях). Вот мои вопросы:
<BR>
| &gt; 1. Верно ли, что связка Рефал-PHP выполнена на основе *реализации*
<BR>
| Рефал-5?
<BR>
| &gt; Или там своя или значительно измененная (типа: подогнанная под структуры
<BR>
| &gt; данных PHP) реализация.
<BR>
|
<BR>
| Никаких изменений и подгонок не делалось. Используется последний дистрибутив
<BR>
| Рефала-5 с официального сайта
<BR>
| <A HREF="http://botik.ru/pub/local/scp/refal5/refal5.html">http://botik.ru/pub/local/scp/refal5/refal5.html</A> .
<BR>
| Собственно все мои разработки выполнены в виде двух библиотек rphplib.ref и
<BR>
| rphplib.php на языках refal-5 и php соответственно. На уровень языка &quot;C&quot; я
<BR>
| пока не спускался.
<BR>
|
<BR>
| &gt; 2. Возвращаюсь к вопросу об обмене выражениями. Мой вопрос был не столько
<BR>
| &gt; о возможности обмена &quot;в обоих направлениях&quot;, сколько о структурах
<BR>
| &gt; передаваемых при этом данных. Так все-таки, можно вызвать
<BR>
| &gt; из рефала PHP-функцию и передать ей в качестве аргумента что-то вроде
<BR>
| &gt;         (A (B '*' 1) (()))
<BR>
| &gt; ? И как это увидит функция на PHP? Как массив из трех элементов, где
<BR>
| второй
<BR>
| &gt; и третий элементы - тоже массивы? Соответственно, может ли функция
<BR>
| &gt; на PHP вызвать функцию рефала с такого рода аргументом? (Из беглого
<BR>
| взгляда
<BR>
| &gt; на описание PHP и его системы типов, мне показалось, что массив PHP - это
<BR>
| &gt; наверно самое близкое, из того, что там имеется, к рефальскому выражению).
<BR>
|
<BR>
| Наверное проще всего рассмотреть и прокомментировать реальный короткий
<BR>
| пример
<BR>
| (Пример 2.5-1 Машинная арифметика. Из руководства по Refal-PHP
<BR>
| <A HREF="http://www.refal.net/~belous/rphprdoc.htm">http://www.refal.net/~belous/rphprdoc.htm</A> ).
<BR>
| Для того, чтобы не ссылаться на библиотеки, в пример включен и текст одной
<BR>
| из библиотечных функций.
<BR>
|
<BR>
| *--------------------------------------------------------------------------
<BR>
| $EXTRN Php;
<BR>
| $ENTRY Go { =
<BR>
|       &lt;Print &lt;Evalf 'sin(0.235)+cos(1/3)'&gt;&gt;
<BR>
| }
<BR>
| * Evalf - evaluation type real expressions
<BR>
| Evalf {
<BR>
|       e.expression = &lt;Php '$Evalf = ' e.expression '; echo $Evalf;'&gt;;
<BR>
| }
<BR>
| *---------------------------------------------------------------------------
<BR>
| Эта программа печатает в результате число 1.1777999318272.
<BR>
|
<BR>
| Пример показывает технику расширения возможностей языка Рефал-5, не имеющего
<BR>
| в последней редакции плавающей арифметики, введением таковой из языка PHP.
<BR>
| Интерфейсная рефал-функция &lt;Php e.expression&gt; не занимается исследованием
<BR>
| структуры выражения  e.expression, а передает его AS IS интерпретатору PHP,
<BR>
| а уж, что он с ним будет делать ..... , естественно зависит от автора
<BR>
| программы, пишущего текст как на Рефале, так и на PHP.
<BR>
|
<BR>
| Я могу передать твое выражение (A (B '*' 1) (()))  статически (в виде строки
<BR>
| символов) или динамически, как e.expression, интерпретатору PHP, но ничего,
<BR>
| кроме ругани на фазе парсинга PHP мы не получим.
<BR>
|
<BR>
| Я, как автор предыдущей программы, передаю PHP из Рефала синтаксически
<BR>
| правильное (в языке PHP) арифметическое выражение, НО  не в голом виде, а
<BR>
| формирую два  оператора - оператор присваивания и оператор вывода результата
<BR>
| этого присваивания (имена переменных в PHP начинаются со знака $).
<BR>
|
<BR>
| Поток вывода перехватывается и выдается Рефалу как результат.
<BR>
|
<BR>
| Естественно, никто не мешает мне написать на PHP программу, которая будет
<BR>
| заниматься осмысленным анализом твоего выражения, и передавать его ЕЙ  (а не
<BR>
| просто интерпретатору PHP) в качестве аргумента для обработки.
<BR>
|
<BR>
| Рефал-функция &lt;Php e.expression&gt; не обладает никаким дополнительным
<BR>
| встроенным интеллектом, а служит только двусторонним мостом для передачи
<BR>
| данных  и управления между  Refal и PHP интерпретаторами.
<BR>
|
<BR>
| Вызов Рефала из PHP также возможен,  но боюсь, что это уже оффтопик.
<BR>
|
<BR>
| &gt;
<BR>
| &gt; Пока все.
<BR>
| &gt; Заранее спасибо.
<BR>
| Алик, если я не совсем правильно понял вопросы, то заранее прошу прощения.
<BR>
| Готов продолжить обсуждение.
<BR>
|
<BR>
| &gt; С уважением,
<BR>
| &gt;  Аркадий
<BR>
| С уважением,
<BR>
| --Леонид
<BR>
|
<BR>
| [...]
<BR>
|
<BR>
| ----- Исходное сообщение -----
<BR>
| От: &quot;Arkady Klimov&quot; &lt;arklimov@keldysh.ru&gt;
<BR>
| Кому: &lt;refal@botik.ru&gt;
<BR>
| Отправлено: 23 апреля 2003 г. 23:28
<BR>
| Тема: Re: Refal-J: first release
<BR>
|
<BR>
|
<BR>
|
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0309.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0307.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0307.html">Leonid Belous: "Re: Refal-J: first release"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0309.html">Leonid Belous: "Re: Refal-J: first release"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0307.html">Arkady Klimov: "Re: Refal-J: first release"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.fts.frontec.se/~dast/hypermail/">hypermail 2b25</A> 
: <EM>Mon Oct 25 2004 - 21:24:59 MSD</EM>
</EM>
</SMALL>
</BODY>
</HTML>
