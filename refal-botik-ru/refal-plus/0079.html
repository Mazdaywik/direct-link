<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>refal-plus@botik.ru -- Discussing the Refal+ programming langua</TITLE>
<META NAME="Author" CONTENT="Andrei Klimov (klimov@keldysh.ru)">
<META NAME="Subject" CONTENT="Re: Case-sensitive Refal+">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Case-sensitive Refal+</H1>
<HR>
<P>
<!-- received="Thu Dec  2 16:21:33 1999 MSK" -->
<!-- sent="Thu, 2 Dec 1999 16:19:07 +0300" -->
<!-- name="Andrei Klimov" -->
<!-- email="klimov@keldysh.ru" -->
<!-- subject="Re: Case-sensitive Refal+" -->
<!-- id="025d01bf3cc8$259a7af0$0100a8c0@piii" -->
<!-- inreplyto="3843FA3F.F160866F@msu.ru" -->
<STRONG>Andrei Klimov</STRONG> (<A HREF="mailto:klimov@keldysh.ru?subject=Re:%20Case-sensitive%20Refal%2B"><EM>klimov@keldysh.ru</EM></A>)<BR>
<EM>Thu, 2 Dec 1999 16:19:07 +0300</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#79">[ date ]</A>
<A HREF="index.html#79">[ thread ]</A>
<A HREF="subject.html#79">[ subject ]</A>
<A HREF="author.html#79">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0080.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0078.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0072.html">Andrey Slepuhin: "Case-sensitive Refal+"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0080.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Андрей (С), спасибо за усилия и успехи в деле наведения порядка
<BR>
в реализации Рефала Плюс и в самом языке!
<BR>
<P>Позвольте и мне сделать несколько замечаний.
<BR>
<P>-1-
<BR>
<P><EM>&gt; From: Andrey Slepuhin &lt;<A HREF="mailto:pooh@msu.ru?subject=Re:%20Case-sensitive%20Refal%2B">pooh@msu.ru</A>&gt;
</EM><BR>
<EM>&gt; Sent: Tuesday, 30 November, 1999 20:54
</EM><BR>
<P><EM>&gt; Геморрой, собственно, уже устранен. Будет одно ограничение
</EM><BR>
<EM>&gt; (естественное) - программа будет собираться либо только из модулей,
</EM><BR>
<EM>&gt; откомпилированных в режиме совместимости, либо только из модулей,
</EM><BR>
<EM>&gt; откомпилированных в стандартном режиме.
</EM><BR>
<P>Мне кажется, что режим &quot;совместимости&quot; нужно сформулировать иначе,
<BR>
чтобы такого рода &quot;ограничения&quot; вообще не возникали (ибо все равно
<BR>
возникает вопрос, а что будет, если их нарушить):
<BR>
<P>&lt;&lt;Режим &quot;case-insensitiveness&quot; означает, что все буквы в идентификаторах
<BR>
данного модуля переводятся в верхний регистр.&gt;&gt;
<BR>
<P>Поскольку понятие &quot;верхний регистр&quot; в этом определении &quot;первичное&quot;,
<BR>
а &quot;case-insensitiveness&quot; или &quot;режим совместимости&quot; -- &quot;вторичные&quot;,
<BR>
то лучше бы назвать ключик -u (Upper case), а не -i (Ignore case или case-Insensitiveness),
<BR>
так как все равно мы не можем спрятать детали.
<BR>
<P>Из этого определения следует, что модули могут быть скомпилированы по-разному,
<BR>
но &quot;совершенно понятно&quot; (извините, что цитирую куклу одного политика, -- прилипло;-),
<BR>
что в этом случае ожидать.
<BR>
<P>-2-
<BR>
<P>Как и Аркадий я голосую за то, чтобы имена функций из старых библиотек были upper case.
<BR>
Мне кажется, что в данном случае &quot;революционное желание&quot; сделать сразу так, чтобы
<BR>
все было &quot;красиво&quot;, не слишком перетягивает противоположные аргументы:
<BR>
<P>Во-первых, так написано в книжке.
<BR>
Во-вторых, имена стандартных функций из основных библиотек, написанные большими
<BR>
буквами, смотрятся не так уж и плохо.
<BR>
В-третьих, все равно нам предстоит подключение к Рефалу Плюс каких-нибудь
<BR>
распространенных системных библиотек типа Tcl/Tk-шной, и лучше это библиотеку
<BR>
просто заморозить и не трогать -- только исправлять ошибки.
<BR>
<P>-3-
<BR>
<P>Кстати, об ошибках в библиотеке. Вот пример одной.
<BR>
<P>Как раз вчера, пиша &quot;скриптуху&quot; на Рефале Плюс, я вспомнил, что уже давно тихо
<BR>
мечтаю об исправлении одной &quot;мелкой&quot; ошибки в функциях &quot;READ-LINE&quot; и &quot;READ-LINE!&quot;.
<BR>
(Слово &quot;мелкая&quot; беру в кавычки, так как в формальных системах, коими являются
<BR>
программы, &quot;мелких&quot; ошибок не бывает -- ...как и &quot;осетрины второй свежести&quot;.;-)
<BR>
<P>СЕЙЧАС ТАК: Если последняя строка в файле закрыта символами конца строки,
<BR>
то выдается еще одна пустая строка и только после этого объявляется конец файла.
<BR>
<P>НАДО ТАК: Если последняя строка в файле оканчивается символом (-ами) конца строки,
<BR>
а после них ничего нет, то конец файла объявляется после чтения этой строки.
<BR>
Если же последняя (непустая) строка не закрыта символом (-ами) конца строки,
<BR>
то она выдается, и после нее объявляется конец файла.
<BR>
<P>МОТИВИРОВКА: Простейший цикл чтения-записи в файл (который является основой
<BR>
&quot;мелкой скриптухи&quot;; заметим, что за его важность он даже встроен в Perl-интерпретатор!),
<BR>
должен выдавать файл без изменения -- кроме, быть может, некоторой &quot;нормализации&quot;
<BR>
(то есть, быть &quot;идемпотентным&quot;: после первого применения переводить данные в неподвижную точку):
<BR>
<P>---------------------------------------------------
<BR>
$use StdIO;
<BR>
<P>$func Loop = ;
<BR>
$func Edit? e = e;
<BR>
<P>Main  = &lt;Loop&gt;;
<BR>
<P>Loop {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;, &lt;PRINTLN &lt;Edit &lt;READ-LINE&gt;&gt;&gt;, &lt;Loop&gt;;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;= ;
<BR>
};
<BR>
<P>Edit {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;eX = eX;
<BR>
};
<BR>
---------------------------------------------------
<BR>
<P>Если бы этой ошибки не было, то я бы рекомендовал этот файл как основу
<BR>
использования Рефала Плюс вместо Перла:
<BR>
<P>==&gt; Заменяйте тело функции Edit и программируйте разные построчный преобразования текстовых файлов!
<BR>
<P>Кстати, обратите внимание, что откатность функции Edit позволяет внутри нее
<BR>
принимать решение о конце файла. &quot;Мелочь, а приятно!&quot;
<BR>
<P>Однако, &quot;одна мелкая ошибка&quot; портит прекрасный мир конкуренции с перловкой!
<BR>
<P>Андрей (К).
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0080.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0078.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0072.html">Andrey Slepuhin: "Case-sensitive Refal+"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0080.html">Andrey Slepuhin: "Re: Case-sensitive Refal+"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Dec 02 1999 - 16:21:34 MSK</EM>
</EM>
</SMALL>
</BODY>
</HTML>
